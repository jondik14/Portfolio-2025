<!DOCTYPE html>
<html lang="en">
<head>
    <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate">
    <meta http-equiv="Pragma" content="no-cache">
    <meta http-equiv="Expires" content="0">
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Luke Niccol - Product Designer</title>
    <meta name="description" content="Product designer crafting digital experiences for startups and product teams.">
    
    <!-- Favicon -->
    <link rel="icon" type="image/png" href="Logo black bg.png">
    
    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=DM+Serif+Display:ital@0;1&family=Instrument+Sans:wght@400;500;600;700&display=swap" rel="stylesheet">
    
    <!-- GSAP for animations -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.5/gsap.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.5/MotionPathPlugin.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.5/ScrollTrigger.min.js"></script>
    
    <!-- Three.js for shader effects -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/0.160.0/three.min.js"></script>
    
    <!-- D3.js for network graph -->
    <script src="https://d3js.org/d3.v7.min.js"></script>
    
    <style>
        @font-face {
            font-family: 'Cirka';
            src: url('fonts/Cirka/Cirka-Regular.woff2') format('woff2');
            font-weight: 400;
            font-style: normal;
            font-display: swap;
        }
        @font-face {
            font-family: 'Cirka';
            src: url('fonts/Cirka/Cirka-Bold.woff2') format('woff2');
            font-weight: 700;
            font-style: normal;
            font-display: swap;
        }
    </style>
    
    <style>
        /* ===== CSS VARIABLES ===== */
        :root {
            --font-sans: 'Instrument Sans', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
            --font-serif: 'DM Serif Display', Georgia, serif;
            --font-heading: 'Cirka', Georgia, serif;
            
            /* Minor Third Typescale (1.2) - More refined, accessible sizes */
            --text-xs: 0.75rem;     /* 12px - minimum for accessibility */
            --text-sm: 0.875rem;    /* 14px */
            --text-base: 1rem;      /* 16px */
            --text-lg: 1.2rem;      /* 19px */
            --text-xl: 1.44rem;     /* 23px */
            --text-2xl: 1.728rem;   /* 28px */
            --text-3xl: 2.074rem;   /* 33px */
            --text-4xl: 2.488rem;   /* 40px */
            --text-5xl: 2.986rem;   /* 48px */
            --text-6xl: 3.583rem;   /* 57px */
            --text-7xl: 4.3rem;     /* 68px */
            --text-8xl: 5.16rem;    /* 82px */
            --text-9xl: 6.19rem;    /* 99px */
            
            /* 8pt Spacing System */
            --space-1: 8px;
            --space-2: 16px;
            --space-3: 24px;
            --space-4: 32px;
            --space-5: 40px;
            --space-6: 48px;
            --space-8: 64px;
            --space-10: 80px;
            --space-12: 96px;
            --space-16: 128px;
            --space-20: 160px;
            
            --radius-sm: 12px;
            --radius-md: 16px;
            --radius-lg: 20px;
            --radius-xl: 24px;
            --radius-2xl: 32px;
            --radius-full: 9999px;
            
            --transition-fast: 150ms cubic-bezier(0.4, 0, 0.2, 1);
            --transition-base: 250ms cubic-bezier(0.4, 0, 0.2, 1);
            --transition-slow: 400ms cubic-bezier(0.4, 0, 0.2, 1);
            
            --surface: #ffffff;
            --surface-elevated: #fcfcfd;
            --border-subtle: rgba(0, 0, 0, 0.04);
            --border-default: rgba(0, 0, 0, 0.08);
            
            --shadow-sm: 0 1px 2px rgba(0, 0, 0, 0.02);
            --shadow-md: 0 4px 12px rgba(0, 0, 0, 0.04);
            --shadow-lg: 0 12px 32px rgba(0, 0, 0, 0.06);
        }
        
        /* Light Theme (default) */
        :root, :root[data-theme="light"] {
            --text-primary: #111522;
            --text-secondary: #4a5585; /* Darkened from #5767a8 for better contrast against white */
            --text-muted: #6b779c; /* Darkened from #8892b0 for better contrast */
            --accent: #0070cc; /* Darkened from #0091ff to pass WCAG 3 / 4.5:1 */
            --hex-glow: #0070cc;
            --hex-stroke: rgba(0, 112, 204, 0.1);
            --surface: #ffffff;
            --surface-elevated: #f9fafc;
            --card-bg: #fcfcfd;
            --nav-bg: rgba(255, 255, 255, 0.8);
        }
        
        /* Dark Theme */
        :root[data-theme="dark"] {
            --text-primary: #f8f9fc;
            --text-secondary: #b0b9e0; /* Lightened for better contrast on dark */
            --text-muted: #8b99cf; /* Lightened for better contrast */
            --accent: #4dafff; /* Lightened slightly for better contrast on dark backgrounds */
            --hex-glow: #4dafff;
            --hex-stroke: rgba(77, 175, 255, 0.1);
            --surface: #0a0a14;
            --surface-elevated: #11111f;
            --card-bg: #141424;
            --border-subtle: rgba(255, 255, 255, 0.03);
            --border-default: rgba(255, 255, 255, 0.08);
            --nav-bg: rgba(10, 10, 20, 0.8);
        }
        
        /* ===== RESET ===== */
        *, *::before, *::after {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }
        
        a {
            color: inherit;
            text-decoration: none;
        }
        
        /* Focus states for all links */
        a:focus {
            outline: 2px solid var(--accent);
            outline-offset: 2px;
            border-radius: var(--radius-sm);
        }
        
        a:focus:not(:focus-visible) {
            outline: none;
        }
        
        a:focus-visible {
            outline: 2px solid var(--accent);
            outline-offset: 2px;
            border-radius: var(--radius-sm);
        }
        
        body {
            font-family: var(--font-sans);
            font-size: 16px;
            color: var(--text-primary);
            background: transparent;
            line-height: 1.5;
            transition: color 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            overflow-x: hidden;
        }
        
        /* Background color on html to show through body */
        html {
            background: var(--surface);
            transition: background 0.4s cubic-bezier(0.4, 0, 0.2, 1);
        }
        
        @media (max-width: 640px) {
            body {
                font-size: 15px;
            }
        }

        /* Smooth theme transition overlay */
        .theme-transition-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: var(--surface);
            z-index: 9999;
            opacity: 0;
            pointer-events: none;
            transition: opacity 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }

        .theme-transition-overlay.active {
            opacity: 1;
            pointer-events: auto;
        }

        /* Initial states for load animation - subtle to prevent flash */
        .nav-container, .hero-title, .hero-subtitle, .hero-cta, .theme-toggle, .hero-gallery {
            opacity: 0.98;
        }

        /* Add transitions to theme-dependent elements */
        h1, h2, h3, h4, h5, h6, p, span, a, div, section, article, nav, header, footer, button, input, textarea, select {
            transition: background-color 0.4s cubic-bezier(0.4, 0, 0.2, 1),
                        color 0.4s cubic-bezier(0.4, 0, 0.2, 1),
                        border-color 0.4s cubic-bezier(0.4, 0, 0.2, 1);
        }

        svg, path, circle, rect, polygon {
            transition: fill 0.4s cubic-bezier(0.4, 0, 0.2, 1),
                        stroke 0.4s cubic-bezier(0.4, 0, 0.2, 1);
        }

        img {
            transition: filter 0.4s cubic-bezier(0.4, 0, 0.2, 1),
                        opacity 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            max-width: 100%;
            height: auto;
        }
        
        @media (max-width: 640px) {
            img {
                max-width: 100%;
                height: auto;
            }
        }

        /* ===== HEXAGON BACKGROUND ===== */
        .hexagon-background {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: 0;
            pointer-events: none;
            overflow: hidden;
            filter: blur(0.5px); /* Soften the laser lines slightly */
        }

        .hexagon-background svg {
            width: 100%;
            height: 100%;
        }

        .hexagon-grid {
            stroke: var(--hex-stroke);
            stroke-width: 1;
            fill: none;
            opacity: 0; /* Hidden grid, only path remains */
        }

        .hex-motion-path {
            fill: none;
            stroke: var(--hex-stroke);
            stroke-width: 1;
            opacity: 0.1; /* Very subtle guide */
        }

        .glow-line {
            fill: none;
            stroke: var(--hex-glow);
            stroke-width: 2.5;
            stroke-linecap: round;
            filter: drop-shadow(0 0 6px var(--hex-glow)) drop-shadow(0 0 15px var(--hex-glow));
            opacity: 0;
            will-change: stroke-dashoffset, opacity;
        }

        /* Ensure content is above the background */
        .page-wrapper {
            position: relative;
            z-index: 10;
        }

        /* ===== SCROLL ANIMATIONS (Legacy fallback) ===== */
        .animate-on-scroll {
            opacity: 1; /* Default to visible for safety */
            transform: translateY(0);
            transition: opacity 0.8s cubic-bezier(0.16, 1, 0.3, 1), transform 0.8s cubic-bezier(0.16, 1, 0.3, 1);
        }
        
        .js-enabled .animate-on-scroll {
            opacity: 0;
            transform: translateY(30px);
        }
        
        .animate-on-scroll.is-visible {
            opacity: 1 !important;
            transform: translateY(0) !important;
        }
        
        /* Staggered delays for sequential animations */
        .animate-delay-1 { transition-delay: 0.1s; }
        .animate-delay-2 { transition-delay: 0.2s; }
        .animate-delay-3 { transition-delay: 0.3s; }
        .animate-delay-4 { transition-delay: 0.4s; }
        .animate-delay-5 { transition-delay: 0.5s; }
        .animate-delay-6 { transition-delay: 0.6s; }
        
        /* Heading animations - subtle slide up with fade */
        .heading-animate {
            opacity: 1;
            transform: translateY(0);
            transition: opacity 0.6s cubic-bezier(0.16, 1, 0.3, 1), transform 0.6s cubic-bezier(0.16, 1, 0.3, 1);
        }

        .js-enabled .heading-animate {
            opacity: 0;
            transform: translateY(20px);
        }
        
        .heading-animate.is-visible {
            opacity: 1 !important;
            transform: translateY(0) !important;
        }
        
        /* Fade in from left/right variants */
        .animate-from-left {
            opacity: 1;
            transform: translateX(0);
            transition: opacity 0.8s cubic-bezier(0.16, 1, 0.3, 1), transform 0.8s cubic-bezier(0.16, 1, 0.3, 1);
        }

        .js-enabled .animate-from-left {
            opacity: 0;
            transform: translateX(-30px);
        }
        
        .animate-from-right {
            opacity: 1;
            transform: translateX(0);
            transition: opacity 0.8s cubic-bezier(0.16, 1, 0.3, 1), transform 0.8s cubic-bezier(0.16, 1, 0.3, 1);
        }

        .js-enabled .animate-from-right {
            opacity: 0;
            transform: translateX(30px);
        }
        
        .animate-from-left.is-visible,
        .animate-from-right.is-visible {
            opacity: 1 !important;
            transform: translateX(0) !important;
        }
        
        /* Scale up animation for images/cards */
        .animate-scale {
            opacity: 1;
            transform: scale(1);
            transition: opacity 0.8s cubic-bezier(0.16, 1, 0.3, 1), transform 0.8s cubic-bezier(0.16, 1, 0.3, 1);
        }

        .js-enabled .animate-scale {
            opacity: 0;
            transform: scale(0.95);
        }
        
        .animate-scale.is-visible {
            opacity: 1 !important;
            transform: scale(1) !important;
        }

        h1, .h1 { font-family: var(--font-serif); font-weight: 400; line-height: 1.15; font-size: var(--text-3xl); color: var(--text-primary); }
        h2, .h2 { font-family: var(--font-heading); font-weight: 700; line-height: 1.2; font-size: var(--text-2xl); color: var(--text-primary); }
        h3, .h3 { font-family: var(--font-heading); font-weight: 600; line-height: 1.3; font-size: var(--text-xl); color: var(--text-primary); }
        h4, .h4 { font-family: var(--font-sans); font-weight: 600; line-height: 1.4; font-size: var(--text-lg); color: var(--text-primary); }
        p { font-size: var(--text-base); color: var(--text-secondary); line-height: 1.6; }
        small, .text-sm { font-size: var(--text-sm); }
        .text-xs { font-size: var(--text-xs); }
        .text-lg { font-size: var(--text-lg); }
        .text-xl { font-size: var(--text-xl); }
        .text-2xl { font-size: var(--text-2xl); }
        .text-muted { color: var(--text-muted); }
        
        .page-wrapper {
            max-width: 1400px;
            margin: 0 auto;
            padding: 0 var(--space-6);
        }

        /* 12-Column Grid System */
        .grid-layout {
            display: grid;
            grid-template-columns: repeat(12, 1fr);
            gap: var(--space-6);
            width: 100%;
        }

        @media (max-width: 768px) {
            .grid-layout {
                grid-template-columns: repeat(4, 1fr);
                gap: var(--space-4);
            }
        }

        @media (max-width: 768px) {
            .page-wrapper {
                padding: 0 var(--space-6); /* Consistent with desktop ratio */
            }
            
            section {
                padding: var(--space-12) 0;
            }
            
            .grid-layout {
                gap: var(--space-6);
            }

            .image-grid {
                grid-template-columns: 1fr;
                gap: var(--space-4);
            }
        }

        #library {
            padding: var(--space-6) 0;
        }

        /* ===== MODERN NAV ===== */
        .nav-container {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 96px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 0 var(--space-8);
            z-index: 1000;
            pointer-events: none;
            background: rgba(255, 255, 255, 0.8);
            backdrop-filter: blur(20px);
            -webkit-backdrop-filter: blur(20px);
            transition: background 0.4s cubic-bezier(0.4, 0, 0.2, 1);
        }

        :root[data-theme="dark"] .nav-container {
            background: rgba(10, 10, 20, 0.8);
            backdrop-filter: blur(20px);
            -webkit-backdrop-filter: blur(20px);
        }

        @media (max-width: 768px) {
            .nav-container {
                display: flex;
                height: 64px;
                padding: 0 var(--space-4);
                justify-content: space-between;
            }
            
            .nav-container .pill-nav,
            .nav-container .nav-info {
                display: none;
            }
            
            .nav-name {
                display: block !important;
                font-size: var(--text-base);
                flex: 0 0 auto;
            }
            
            .top-controls {
                position: relative;
                top: 0;
                right: 0;
                display: flex;
                gap: var(--space-2);
            }
            
            .about-grid {
                padding-top: var(--space-8);
            }
            
            .mobile-menu-toggle {
                display: flex !important;
            }
        }
        
        @media (max-width: 640px) {
            .nav-container {
                display: flex;
                height: 64px;
                padding: 0 var(--space-4);
                justify-content: space-between;
            }
            
            .nav-container .pill-nav,
            .nav-container .nav-info {
                display: none;
            }
            
            .nav-name {
                display: block !important;
                font-size: var(--text-base);
                flex: 0 0 auto;
            }
            
            .top-controls {
                position: relative;
                top: 0;
                right: 0;
                display: flex;
                gap: var(--space-2);
            }
        }

        /* ===== MOBILE MENU ===== */
        .mobile-menu {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100vh;
            background: var(--surface);
            z-index: 1050;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            gap: var(--space-8);
            padding: var(--space-12) var(--space-6);
            transform: translateY(-100%);
            transition: transform 0.5s cubic-bezier(0.16, 1, 0.3, 1);
            visibility: hidden;
        }

        .mobile-menu.is-active {
            transform: translateY(0);
            visibility: visible;
        }

        .mobile-menu-link {
            font-family: var(--font-heading);
            font-size: var(--text-3xl);
            font-weight: 700;
            color: var(--text-primary);
            text-decoration: none;
            letter-spacing: -0.02em;
            transition: color 0.3s ease;
        }

        .mobile-menu-link:active {
            color: var(--accent);
        }

        /* Mobile Menu Close / Back Button */
        .mobile-menu-close {
            position: absolute;
            top: var(--space-4);
            right: var(--space-4);
            min-height: 48px;
            padding: 0 var(--space-4);
            display: flex;
            align-items: center;
            justify-content: center;
            gap: var(--space-2);
            background: var(--border-default);
            border: 2px solid var(--border-default);
            border-radius: var(--radius-full);
            cursor: pointer;
            color: var(--text-primary);
            font-family: var(--font-sans);
            font-size: var(--text-base);
            font-weight: 600;
            transition: all 0.3s ease;
            z-index: 1060;
        }

        .mobile-menu-close:hover {
            background: var(--accent);
            color: white;
            border-color: var(--accent);
        }

        .mobile-menu-close:focus {
            outline: none;
            border-color: var(--accent);
            box-shadow: 0 0 0 3px rgba(0, 112, 204, 0.25);
        }

        .mobile-menu-close svg {
            width: 24px;
            height: 24px;
            flex-shrink: 0;
        }

        .mobile-menu-close-text {
            display: block;
        }

        .mobile-menu-toggle span {
            display: block;
            width: 24px;
            height: 2px;
            background: var(--surface);
            transition: all 0.3s ease;
        }

        .mobile-menu-toggle.is-active span:nth-child(1) {
            transform: translateY(8px) rotate(45deg);
        }

        .mobile-menu-toggle.is-active span:nth-child(2) {
            opacity: 0;
        }

        .mobile-menu-toggle.is-active span:nth-child(3) {
            transform: translateY(-8px) rotate(-45deg);
        }

        body.menu-open {
            overflow: hidden;
        }

        .nav-container > * {
            pointer-events: auto;
        }

        .nav-name {
            font-family: var(--font-heading);
            font-weight: 700;
            font-size: var(--text-lg);
            color: var(--text-primary);
            text-align: left;
            line-height: 1;
            flex: 1;
            letter-spacing: -0.02em;
        }

        .nav-info {
            text-align: right;
            font-family: var(--font-sans);
            font-size: var(--text-sm);
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.1em;
            color: var(--text-muted);
            display: flex;
            flex-direction: column;
            gap: 4px;
            flex: 1;
        }

        .pill-nav {
            background: var(--nav-bg);
            backdrop-filter: blur(24px);
            -webkit-backdrop-filter: blur(24px);
            padding: var(--space-1);
            border-radius: var(--radius-full);
            border: 1px solid var(--border-default);
            display: flex;
            align-items: center;
            gap: 4px;
            box-shadow: var(--shadow-md);
            transition: background 0.4s cubic-bezier(0.4, 0, 0.2, 1),
                        border-color 0.4s cubic-bezier(0.4, 0, 0.2, 1);
        }

        /* Secondary nav for separate pages */
        .secondary-nav {
            display: flex;
            align-items: center;
            gap: var(--space-2);
            margin-left: var(--space-4);
            padding-left: var(--space-4);
            border-left: 1px solid var(--border-default);
        }

        .secondary-nav .nav-link {
            background: transparent;
            border: 1px solid var(--border-default);
        }

        .secondary-nav .nav-link:hover {
            background: rgba(0,0,0,0.03);
            border-color: var(--accent);
        }

        @media (max-width: 768px) {
            .secondary-nav {
                display: none;
            }
        }

        .nav-link {
            padding: var(--space-1) var(--space-4);
            font-size: var(--text-sm);
            font-weight: 600;
            color: var(--text-secondary);
            border-radius: var(--radius-full);
            transition: all var(--transition-base);
        }

        .nav-link:hover {
            color: var(--text-primary);
            background: rgba(0,0,0,0.03);
        }

        :root[data-theme="dark"] .nav-link:hover {
            background: rgba(255,255,255,0.05);
        }

        .nav-link:focus {
            outline: 2px solid var(--accent);
            outline-offset: 2px;
        }
        
        .nav-link:focus:not(:focus-visible) {
            outline: none;
        }
        
        .nav-link:focus-visible {
            outline: 2px solid var(--accent);
            outline-offset: 2px;
        }

        .nav-link.active {
            background: var(--accent);
            color: #ffffff;
        }

        .top-controls {
            display: flex;
            align-items: center;
            gap: var(--space-3);
            flex-shrink: 0;
        }
        
        @media (min-width: 769px) {
            .top-controls {
                position: fixed;
                top: calc(96px / 2 - 24px); /* Center vertically with nav height (96px) */
                right: var(--space-4);
                z-index: 1100;
            }
            
            .nav-info {
                padding-right: 70px; /* Add space to prevent overlap with theme toggle */
            }
        }

        .theme-toggle {
            width: 48px;
            height: 48px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: var(--radius-full);
            color: var(--text-primary);
            cursor: pointer;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            border: 1px solid var(--border-default);
            background: var(--surface);
            box-shadow: var(--shadow-md);
            flex-shrink: 0;
        }

        .theme-toggle:hover { 
            transform: scale(1.05);
            border-color: var(--accent);
            background: var(--surface-elevated);
        }

        :root[data-theme="dark"] .theme-toggle:hover {
            background: var(--surface-elevated);
        }

        .mobile-menu-toggle {
            display: none;
            width: 48px;
            height: 48px;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            gap: var(--space-1);
            background: var(--text-primary);
            border-radius: var(--radius-full);
            border: none;
            cursor: pointer;
            padding: 0;
            box-shadow: var(--shadow-md);
        }

        /* ===== PRISMATIC PLAYGROUND BUTTON ===== */
        .playground-btn {
            position: relative;
            padding: 12px 24px;
            font-family: var(--font-sans);
            font-size: var(--text-sm);
            font-weight: 700;
            color: #000000;
            background: rgba(255, 255, 255, 0.15);
            border: 1px solid rgba(255, 255, 255, 0.3);
            border-radius: var(--radius-full);
            cursor: pointer;
            overflow: hidden;
            backdrop-filter: blur(20px);
            -webkit-backdrop-filter: blur(20px);
            box-shadow: 
                0 4px 30px rgba(0, 0, 0, 0.1),
                inset 0 1px 0 rgba(255, 255, 255, 0.4);
            transition: all 0.4s cubic-bezier(0.16, 1, 0.3, 1);
            z-index: 1;
        }

        .playground-btn::before {
            content: '';
            position: absolute;
            inset: -50%;
            background: conic-gradient(
                from 0deg,
                transparent 0deg,
                rgba(255, 0, 128, 0.4) 60deg,
                rgba(0, 255, 255, 0.4) 120deg,
                rgba(128, 0, 255, 0.4) 180deg,
                rgba(255, 255, 0, 0.4) 240deg,
                rgba(0, 255, 128, 0.4) 300deg,
                transparent 360deg
            );
            animation: prism-rotate 4s linear infinite;
            z-index: -2;
            filter: blur(8px);
        }

        .playground-btn::after {
            content: '';
            position: absolute;
            inset: 2px;
            background: linear-gradient(135deg, 
                rgba(255, 255, 255, 0.9) 0%,
                rgba(255, 255, 255, 0.7) 50%,
                rgba(255, 255, 255, 0.9) 100%
            );
            border-radius: calc(var(--radius-full) - 2px);
            z-index: -1;
        }

        /* Shimmer effect overlay */
        .playground-btn .shimmer {
            position: absolute;
            inset: 0;
            overflow: hidden;
            border-radius: var(--radius-full);
        }

        .playground-btn .shimmer::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(
                90deg,
                transparent 0%,
                rgba(255, 255, 255, 0.8) 50%,
                transparent 100%
            );
            animation: shimmer-slide 3s ease-in-out infinite;
        }

        .playground-btn .btn-text {
            position: relative;
            z-index: 2;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .playground-btn:hover {
            transform: translateY(-2px) scale(1.02);
            box-shadow: 
                0 8px 40px rgba(0, 0, 0, 0.15),
                inset 0 1px 0 rgba(255, 255, 255, 0.5),
                0 0 30px rgba(255, 0, 128, 0.2),
                0 0 60px rgba(0, 255, 255, 0.1);
        }

        .playground-btn:active {
            transform: translateY(0) scale(0.98);
        }

        @keyframes prism-rotate {
            from { transform: rotate(0deg); }
            to { transform: rotate(360deg); }
        }

        @keyframes shimmer-slide {
            0%, 100% { left: -100%; }
            50% { left: 100%; }
        }

        /* Dark theme adjustments */
        :root[data-theme="dark"] .playground-btn {
            background: rgba(255, 255, 255, 0.1);
            border-color: rgba(255, 255, 255, 0.2);
        }

        :root[data-theme="dark"] .playground-btn::after {
            background: linear-gradient(135deg, 
                rgba(255, 255, 255, 0.95) 0%,
                rgba(255, 255, 255, 0.85) 50%,
                rgba(255, 255, 255, 0.95) 100%
            );
        }

        .nav-logo {
            display: none; /* Clean up: removed from pill */
        }

        /* Light theme: show black logo, hide white logo */
        :root .logo-light,
        :root[data-theme="light"] .logo-light {
            display: block;
        }
        :root .logo-dark,
        :root[data-theme="light"] .logo-dark {
            display: none;
        }

        /* Dark theme: show white logo, hide black logo */
        :root[data-theme="dark"] .logo-light {
            display: none;
        }
        :root[data-theme="dark"] .logo-dark {
            display: block;
        }

        /* ===== SECTION STYLES ===== */
        .section-header {
            margin-bottom: var(--space-6);
            display: flex;
            align-items: center;
            gap: var(--space-4);
        }

        .section-header .line {
            height: 1px;
            flex: 1;
            background: var(--border-default);
        }

        .section-label {
            font-size: clamp(0.9375rem, 2vw, 1.125rem);
            font-weight: 700;
            text-transform: uppercase;
            letter-spacing: 0.1em;
            color: var(--text-secondary);
        }

        /* ===== ABOUT SECTION ===== */
        .about-grid {
            padding-top: var(--space-20);
            padding-bottom: var(--space-12);
            align-items: center;
        }

        .hero-text {
            grid-column: span 6;
            display: flex;
            flex-direction: column;
            gap: var(--space-8);
        }

        /* ===== HERO GALLERY - Stacked Headshots Only ===== */
        /* ===== HERO GALLERY - Full Image Fade In on Hover ===== */
        .hero-gallery {
            grid-column: span 6;
            width: 100%;
            aspect-ratio: 3 / 4;
            border-radius: var(--radius-lg);
            overflow: hidden;
            position: relative;
            background: #000;
            min-height: 600px;
        }

        .hero-gallery-stack {
            display: flex;
            flex-direction: column;
            width: 100%;
            height: 100%;
            gap: 0;
            position: relative;
        }

        .hero-gallery-item {
            position: relative;
            overflow: hidden;
            flex: 1;
            min-height: 0;
            cursor: pointer;
        }

        /* Strip image - shows section of the portrait */
        .hero-gallery-item .strip-img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            transition: opacity 0.3s ease;
        }

        /* Full image reveal layer - covers entire gallery */
        .hero-gallery-reveal {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            opacity: 0;
            transition: opacity 0.5s cubic-bezier(0.4, 0, 0.2, 1);
            z-index: 50;
            pointer-events: none;
            background-size: cover;
            background-position: center;
        }

        .hero-gallery-reveal.active {
            opacity: 1;
        }



        /* Position each strip image to show different vertical sections (top to bottom) */
        .hero-gallery-item[data-index="0"] .strip-img { object-position: center 0%; }
        .hero-gallery-item[data-index="1"] .strip-img { object-position: center 9%; }
        .hero-gallery-item[data-index="2"] .strip-img { object-position: center 18%; }
        .hero-gallery-item[data-index="3"] .strip-img { object-position: center 27%; }
        .hero-gallery-item[data-index="4"] .strip-img { object-position: center 36%; }
        .hero-gallery-item[data-index="5"] .strip-img { object-position: center 45%; }
        .hero-gallery-item[data-index="6"] .strip-img { object-position: center 55%; }
        .hero-gallery-item[data-index="7"] .strip-img { object-position: center 64%; }
        .hero-gallery-item[data-index="8"] .strip-img { object-position: center 73%; }
        .hero-gallery-item[data-index="9"] .strip-img { object-position: center 82%; }
        .hero-gallery-item[data-index="10"] .strip-img { object-position: center 91%; }
        .hero-gallery-item[data-index="11"] .strip-img { object-position: center 100%; }

        .hero-title {
            font-family: var(--font-heading);
            font-size: clamp(2.25rem, 7.5vw, 4.65rem);
            font-weight: 600;
            line-height: 1.1;
            margin: 0;
            background: linear-gradient(135deg, #0091ff 0%, #00d4ff 50%, #0091ff 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            letter-spacing: -0.01em;
            font-variant-ligatures: none;
        }

        .hero-subtitle {
            font-family: var(--font-heading);
            font-size: clamp(1.25rem, 2.5vw, var(--text-2xl));
            font-weight: 400;
            line-height: 1.4;
            margin: 0;
            color: var(--text-secondary);
            letter-spacing: -0.01em;
            max-width: 90%;
        }

        .hero-cta {
            display: flex;
            align-items: center;
            gap: var(--space-8);
            margin-top: var(--space-6);
        }

        .cta-primary {
            padding: var(--space-3) var(--space-6);
            min-height: 48px;
            background: var(--accent);
            color: #ffffff;
            border-radius: var(--radius-full);
            font-weight: 600;
            font-size: var(--text-lg);
            text-decoration: none;
            transition: all 0.2s ease;
            display: inline-flex;
            align-items: center;
            gap: var(--space-2);
            border: none;
            position: relative;
            overflow: hidden;
        }

        /* Shimmer effect for Email me button */
        .cta-primary::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(
                90deg,
                transparent 0%,
                rgba(255, 255, 255, 0.4) 50%,
                transparent 100%
            );
            transition: left 0.5s ease;
        }

        .cta-primary:hover::before {
            left: 100%;
            animation: shimmer-cta 0.8s ease;
        }

        @keyframes shimmer-cta {
            0% { left: -100%; }
            100% { left: 100%; }
        }

        .cta-primary:hover {
            opacity: 0.9;
            transform: translateY(-2px);
        }

        .cta-primary:active {
            border-radius: var(--radius-full);
            transform: translateY(0);
        }

        .cta-primary svg {
            width: 22px;
            height: 22px;
            fill: currentColor;
        }

        .cta-secondary {
            color: var(--accent);
            font-weight: 600;
            font-size: var(--text-lg);
            text-decoration: none;
            transition: all 0.2s ease;
            display: inline-flex;
            align-items: center;
            gap: var(--space-2);
            min-height: 48px;
            padding: var(--space-2) 0;
        }

        .cta-secondary:hover {
            opacity: 0.8;
            transform: translateX(4px);
        }

        .cta-secondary svg {
            width: 22px;
            height: 22px;
            fill: currentColor;
        }

        @media (max-width: 900px) {
            .nav-info {
                display: none;
            }
        }
        
        @media (max-width: 640px) {
            .about-grid {
                padding-top: var(--space-6); /* Reduced since navbar is gone */
                padding-bottom: var(--space-8);
                gap: var(--space-10);
            }
            
            .hero-text {
                grid-column: span 4;
            }
            
            .hero-gallery {
                grid-column: span 4;
                aspect-ratio: 410 / 550;
                min-height: 400px;
                max-width: 100%;
                margin: var(--space-8) auto 0;
                width: 100%;
            }
        }

        /* Mobile - carousel gallery */
        @media (max-width: 768px) {
            .hero-gallery {
                aspect-ratio: 3 / 4;
                min-height: 350px;
            }

            .hero-gallery-stack {
                display: block;
                position: relative;
            }

            .hero-gallery-item {
                position: absolute;
                top: 0;
                left: 0;
                width: 100%;
                height: 100%;
                opacity: 0;
                transition: opacity 0.6s ease;
                flex: none;
            }

            .hero-gallery-item.active {
                opacity: 1;
            }

            .hero-gallery-item .strip-img {
                object-position: center !important;
            }

            /* Hide reveal layer on mobile */
            .hero-gallery-reveal {
                display: none;
            }
            
            .hero-title {
                font-size: clamp(2rem, 10vw, 3rem); /* Increased from 1.5rem / 2.25rem */
                letter-spacing: -0.02em;
                line-height: 1.1;
                margin-bottom: var(--space-4);
            }
            
            .hero-subtitle {
                font-size: clamp(1.1rem, 4vw, 1.35rem); /* Increased from 0.95rem / var(--text-lg) */
                line-height: 1.5;
            }

            .hero-cta {
                flex-direction: column;
                align-items: flex-start;
                gap: var(--space-4);
                margin-top: var(--space-8);
            }
        }

        /* ===== CONSISTENT SECTION TYPOGRAPHY ===== */
        .section-title {
            font-family: var(--font-heading);
            font-size: clamp(2rem, 4vw, 2.75rem);
            font-weight: 700;
            letter-spacing: -0.02em;
            color: var(--text-primary);
            line-height: 1.1;
            margin-bottom: var(--space-8);
        }

        /* ===== WORK SECTION – High Impact Design ===== */
        .work-section-clean {
            padding: var(--space-20) 0;
            background: var(--surface);
            position: relative;
        }

        .work-header {
            display: flex;
            flex-direction: column;
            gap: var(--space-4);
            margin-bottom: var(--space-12);
        }

        .work-section-title {
            font-family: var(--font-heading);
            font-size: clamp(2rem, 4vw, 2.75rem);
            font-weight: 700;
            letter-spacing: -0.02em;
            color: var(--text-primary);
            line-height: 1.1;
        }

        .work-section-subtitle {
            font-size: clamp(1.125rem, 2vw, 1.5rem);
            color: var(--text-secondary);
            line-height: 1.6;
            max-width: 600px;
        }

        /* Full-width Grid Layout */
        .work-bento-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: var(--space-8);
            max-width: 1400px;
            margin: 0 auto;
        }

        /* Work Cards – Large Impact */
        .work-card {
            position: relative;
            background: var(--surface-elevated);
            border-radius: var(--radius-2xl);
            overflow: hidden;
            transition: all 0.6s cubic-bezier(0.4, 0, 0.2, 1);
            will-change: transform;
        }

        .work-card:hover {
            transform: translateY(-16px) scale(1.02);
            box-shadow: 0 48px 96px rgba(0, 0, 0, 0.15);
        }

        [data-theme="dark"] .work-card:hover {
            box-shadow: 0 48px 96px rgba(0, 0, 0, 0.5);
        }

        .work-card-link {
            display: block;
            text-decoration: none;
            color: inherit;
            height: 100%;
        }

        /* Large Card Image – 16:10 Aspect Ratio */
        .work-card-image {
            position: relative;
            aspect-ratio: 16/10;
            overflow: hidden;
            background: var(--border-subtle);
        }

        .work-card-image img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            transition: transform 1s cubic-bezier(0.4, 0, 0.2, 1);
        }

        .work-card:hover .work-card-image img {
            transform: scale(1.08);
        }

        /* Subtle corner indicator on hover - doesn't cover image */
        .work-card-image::after {
            content: '';
            position: absolute;
            top: var(--space-4);
            right: var(--space-4);
            width: 48px;
            height: 48px;
            background: rgba(255, 255, 255, 0.95);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            opacity: 0;
            transform: scale(0.8);
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            backdrop-filter: blur(10px);
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.15);
        }

        .work-card-image::before {
            content: '→';
            position: absolute;
            top: var(--space-4);
            right: var(--space-4);
            width: 48px;
            height: 48px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 20px;
            color: var(--text-primary);
            z-index: 2;
            opacity: 0;
            transform: scale(0.8);
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1) 0.05s;
            pointer-events: none;
        }

        .work-card:hover .work-card-image::after,
        .work-card:hover .work-card-image::before {
            opacity: 1;
            transform: scale(1);
        }

        /* No overlay - image stays fully visible */
        .work-card-overlay {
            display: none;
        }

        /* Prominent Card Content */
        .work-card-content {
            padding: var(--space-6);
        }

        .work-card-meta {
            display: flex;
            gap: var(--space-3);
            margin-bottom: var(--space-4);
            flex-wrap: wrap;
        }

        .work-card-tag {
            font-size: 12px;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.08em;
            color: var(--text-muted);
            padding: 6px 14px;
            background: var(--border-subtle);
            border-radius: var(--radius-full);
            transition: all 0.3s ease;
        }

        .work-card:hover .work-card-tag {
            background: rgba(0, 112, 204, 0.1);
            color: var(--accent);
        }

        .work-card-title {
            font-family: var(--font-heading);
            font-size: clamp(1.5rem, 2.5vw, 2rem);
            font-weight: 700;
            line-height: 1.2;
            color: var(--text-primary);
            margin: 0 0 var(--space-3);
            transition: color 0.3s ease;
        }

        .work-card:hover .work-card-title {
            color: var(--accent);
        }

        .work-card-client {
            font-size: var(--text-base);
            color: var(--text-muted);
            font-weight: 500;
            display: flex;
            align-items: center;
            gap: var(--space-2);
        }

        .work-card-client::before {
            content: '';
            width: 6px;
            height: 6px;
            background: var(--accent);
            border-radius: 50%;
        }

        /* Mobile Optimizations */
        @media (max-width: 1024px) {
            .work-bento-grid {
                grid-template-columns: 1fr;
                gap: var(--space-6);
                max-width: 680px;
            }

            .work-card-image {
                aspect-ratio: 16/10;
            }

            /* Show arrow indicator on touch devices */
            .work-card-image::after,
            .work-card-image::before {
                opacity: 1;
                transform: scale(1);
            }
        }

        @media (max-width: 768px) {
            .work-section-clean {
                padding: var(--space-12) 0;
            }

            .work-header {
                margin-bottom: var(--space-8);
                text-align: center;
                align-items: center;
            }

            .work-section-title {
                font-size: clamp(1.75rem, 6vw, 2.25rem);
            }

            .work-section-subtitle {
                font-size: var(--text-base);
            }

            .work-bento-grid {
                gap: var(--space-5);
            }

            .work-card {
                border-radius: var(--radius-xl);
            }

            .work-card:hover {
                transform: translateY(-8px) scale(1.01);
            }

            .work-card-image {
                aspect-ratio: 4/3;
            }

            .work-card-image::after,
            .work-card-image::before {
                width: 40px;
                height: 40px;
                top: var(--space-3);
                right: var(--space-3);
            }

            .work-card-image::before {
                font-size: 16px;
            }

            .work-card-content {
                padding: var(--space-4);
            }

            .work-card-title {
                font-size: var(--text-lg);
            }

            .work-card-meta {
                gap: var(--space-2);
                margin-bottom: var(--space-3);
            }

            .work-card-tag {
                font-size: 10px;
                padding: 4px 10px;
            }

            .work-card-client {
                font-size: var(--text-sm);
            }
        }

        @media (max-width: 480px) {
            .work-bento-grid {
                gap: var(--space-4);
            }

            .work-card-image {
                aspect-ratio: 3/2;
            }

            .work-card-content {
                padding: var(--space-3);
            }

            .work-card-title {
                font-size: var(--text-base);
            }
        }

        /* ===== OTHER PROJECTS SECTION ===== */
        .other-projects-section {
            padding: var(--space-20) 0;
            background: var(--surface);
        }

        .other-projects-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(320px, 1fr));
            gap: var(--space-6);
            margin-top: var(--space-8);
        }

        .other-project-card {
            display: block;
            background: var(--surface-elevated);
            border: 1px solid var(--border-default);
            border-radius: var(--radius-xl);
            overflow: hidden;
            transition: all 0.3s ease;
            text-decoration: none;
            color: inherit;
        }

        .other-project-card:hover {
            transform: translateY(-8px);
            box-shadow: var(--shadow-lg);
            border-color: var(--border-subtle);
        }

        .other-project-image {
            position: relative;
            aspect-ratio: 16/10;
            overflow: hidden;
            background: var(--border-subtle);
        }

        .other-project-image img,
        .other-project-image video {
            width: 100%;
            height: 100%;
            object-fit: cover;
            transition: transform 0.5s ease;
        }

        .other-project-card:hover .other-project-image img,
        .other-project-card:hover .other-project-image video {
            transform: scale(1.05);
        }

        .other-project-content {
            display: flex;
            flex-direction: column;
            gap: var(--space-3);
            padding: var(--space-5);
        }

        .other-project-title {
            font-family: var(--font-heading);
            font-size: var(--text-xl);
            font-weight: 700;
            color: var(--text-primary);
            margin: 0;
        }

        .other-project-description {
            font-size: var(--text-base);
            line-height: 1.6;
            color: var(--text-secondary);
            margin: 0;
        }

        .other-project-tags {
            display: flex;
            flex-wrap: wrap;
            gap: var(--space-2);
            margin-top: var(--space-2);
        }

        .other-project-tags .tag {
            display: inline-block;
            padding: var(--space-1) var(--space-2);
            background: rgba(0, 0, 0, 0.04);
            border-radius: var(--radius-sm);
            font-size: var(--text-sm);
            font-weight: 500;
            color: var(--text-secondary);
        }

        .other-project-link {
            display: inline-flex;
            align-items: center;
            gap: var(--space-1);
            color: var(--accent);
            text-decoration: none;
            font-weight: 600;
            font-size: var(--text-base);
            margin-top: var(--space-3);
            transition: gap 0.2s ease;
        }

        .other-project-link:hover {
            gap: var(--space-2);
        }

        @media (max-width: 640px) {
            .other-projects-grid {
                grid-template-columns: 1fr;
            }
        }

        /* ===== SHAPE BLUR EFFECT ===== */
        /* ===== GRADUAL BLUR EFFECT ===== */
        .gradual-blur {
            position: fixed;
            left: 0;
            right: 0;
            pointer-events: none;
            z-index: 900;
            overflow: hidden;
            isolation: isolate;
        }
        .gradual-blur-top {
            top: 0;
        }
        .gradual-blur-bottom {
            bottom: 0;
        }
        .gradual-blur-inner {
            position: relative;
            width: 100%;
            height: 100%;
        }
        .gradual-blur-inner > div {
            pointer-events: none;
            will-change: backdrop-filter;
        }

        .link_icon {
            width: 20px;
            height: 14px;
        }

        .link_icon svg {
            width: 100%;
            height: 100%;
        }

        /* ===== OTHER SECTION ===== */
        .other-section {
            padding: var(--space-20) 0;
            background: var(--surface);
        }

        .other-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: var(--space-6);
        }

        @media (max-width: 640px) {
            .other-section {
                padding: var(--space-12) 0;
            }
            
            .other-grid { 
                grid-template-columns: 1fr;
                gap: var(--space-4);
            }
            
            .mini-card {
                padding: var(--space-6);
            }
        }

        .mini-card {
            background: rgba(252, 252, 253, 0.85); /* Semi-transparent */
            backdrop-filter: blur(12px);
            padding: var(--space-10);
            border-radius: var(--radius-2xl);
            border: 1px solid var(--border-subtle);
            transition: background 0.4s cubic-bezier(0.4, 0, 0.2, 1),
                        border-color 0.4s cubic-bezier(0.4, 0, 0.2, 1),
                        transform 0.4s cubic-bezier(0.4, 0, 0.2, 1),
                        box-shadow 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            display: flex;
            flex-direction: column;
            gap: var(--space-6);
            height: 100%;
        }
        
        :root[data-theme="dark"] .mini-card {
            background: rgba(20, 20, 36, 0.85);
        }
        .mini-card:hover { 
            border-color: var(--accent); 
            transform: translateY(-8px);
            box-shadow: var(--shadow-lg);
        }

        /* ===== READING ROOM CARD ===== */
        .reading-room-card {
            display: block;
            background: rgba(252, 252, 253, 0.85);
            backdrop-filter: blur(12px);
            padding: var(--space-6) var(--space-10);
            border-radius: var(--radius-2xl);
            border: 1px solid var(--border-subtle);
            transition: background 0.4s cubic-bezier(0.4, 0, 0.2, 1),
                        transform 0.4s cubic-bezier(0.4, 0, 0.2, 1),
                        border-color 0.4s cubic-bezier(0.4, 0, 0.2, 1),
                        box-shadow 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            text-decoration: none;
            color: inherit;
            position: relative;
        }

        :root[data-theme="dark"] .reading-room-card {
            background: rgba(20, 20, 36, 0.85);
        }

        .reading-room-card:hover {
            border-color: var(--accent);
            transform: translateY(-8px);
            box-shadow: var(--shadow-lg);
        }
        
        .reading-room-card:focus {
            outline: 2px solid var(--accent);
            outline-offset: 2px;
        }
        
        .reading-room-card:focus:not(:focus-visible) {
            outline: none;
        }
        
        .reading-room-card:focus-visible {
            outline: 2px solid var(--accent);
            outline-offset: 2px;
        }

        .reading-room-card {
            overflow: hidden;
        }

        .reading-room-content {
            display: flex;
            flex-direction: row;
            align-items: center;
            justify-content: space-between;
            gap: var(--space-6);
            position: relative;
            min-height: 450px;
        }

        .reading-room-text {
            max-width: 600px;
            z-index: 2;
            text-align: left;
            flex: 1;
        }

        .reading-room-label {
            display: block;
            font-size: var(--text-xs);
            font-weight: 700;
            text-transform: uppercase;
            letter-spacing: 0.1em;
            color: var(--text-muted);
            margin-bottom: var(--space-2);
            margin-top: 0;
            padding-top: 0;
            margin-top: 0;
        }

        .reading-room-title {
            font-size: var(--text-lg);
            margin-bottom: var(--space-2);
            color: var(--text-primary);
        }

        .reading-room-description {
            font-size: var(--text-sm);
            color: var(--text-secondary);
        }

        .reading-room-books {
            position: relative;
            flex-shrink: 0;
            width: 700px;
            height: 450px;
            display: flex;
            align-items: center;
            justify-content: flex-end;
            pointer-events: auto;
            margin-left: auto;
        }

        .reading-room-book {
            position: absolute;
            width: auto;
            height: 75%;
            max-height: 330px;
            object-fit: contain;
            filter: drop-shadow(0 4px 12px rgba(0, 0, 0, 0.15));
            transition: transform 0.5s cubic-bezier(0.4, 0, 0.2, 1), filter 0.5s cubic-bezier(0.4, 0, 0.2, 1);
            pointer-events: none;
        }

        .reading-room-book-1 {
            transform: translateX(-220px) translateY(0) rotate(-10deg) translateZ(0);
            z-index: 1;
        }

        .reading-room-book-2 {
            transform: translateX(-100px) translateY(0) rotate(-5deg) translateZ(0);
            z-index: 2;
        }

        .reading-room-book-3 {
            transform: translateX(20px) translateY(0) rotate(3deg) translateZ(0);
            z-index: 3;
        }

        .reading-room-card:hover .reading-room-book-1,
        .reading-room-books:hover .reading-room-book-1 {
            transform: translateX(-250px) translateY(-25px) rotate(-12deg) translateZ(0);
            filter: drop-shadow(0 8px 20px rgba(0, 0, 0, 0.25));
        }

        .reading-room-card:hover .reading-room-book-2,
        .reading-room-books:hover .reading-room-book-2 {
            transform: translateX(-115px) translateY(-40px) rotate(-6deg) translateZ(0);
            filter: drop-shadow(0 8px 20px rgba(0, 0, 0, 0.25));
        }

        .reading-room-card:hover .reading-room-book-3,
        .reading-room-books:hover .reading-room-book-3 {
            transform: translateX(35px) translateY(-30px) rotate(4deg) translateZ(0);
            filter: drop-shadow(0 8px 20px rgba(0, 0, 0, 0.25));
        }

        .reading-room-arrow {
            position: absolute;
            bottom: var(--space-6);
            right: var(--space-6);
            width: 40px;
            height: 40px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: var(--accent);
            opacity: 0;
            transform: translateX(-10px);
            transition: transform 0.4s cubic-bezier(0.4, 0, 0.2, 1), opacity 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            z-index: 10;
        }

        .reading-room-card:hover .reading-room-arrow {
            opacity: 1;
            transform: translateX(0);
        }

        @media (max-width: 900px) {
            .reading-room-content {
                flex-direction: column;
                align-items: center;
                min-height: auto;
                gap: var(--space-6);
            }

            .reading-room-text {
                max-width: 100%;
                text-align: center;
            }

            .reading-room-books {
                width: 100%;
                max-width: 100%;
                height: 350px;
                min-height: 350px;
                justify-content: center;
                margin-left: 0;
                position: relative;
            }

            .reading-room-book {
                height: 80%;
                max-height: none;
                position: absolute;
            }

            .reading-room-book-1 {
                transform: translateX(-100px) translateY(5px) rotate(-10deg) translateZ(0);
            }

            .reading-room-book-2 {
                transform: translateX(0) translateY(0) rotate(-3deg) translateZ(0);
            }

            .reading-room-book-3 {
                transform: translateX(100px) translateY(5px) rotate(8deg) translateZ(0);
            }

            .reading-room-card:hover .reading-room-book-1,
            .reading-room-books:hover .reading-room-book-1 {
                transform: translateX(-110px) translateY(-10px) rotate(-12deg) translateZ(0);
            }

            .reading-room-card:hover .reading-room-book-2,
            .reading-room-books:hover .reading-room-book-2 {
                transform: translateX(0) translateY(-15px) rotate(-3deg) translateZ(0);
            }

            .reading-room-card:hover .reading-room-book-3,
            .reading-room-books:hover .reading-room-book-3 {
                transform: translateX(110px) translateY(-10px) rotate(10deg) translateZ(0);
            }
        }

        @media (max-width: 640px) {
            .reading-room-card {
                padding: var(--space-5);
            }

            .reading-room-content {
                flex-direction: column;
                gap: var(--space-4);
                min-height: auto;
            }

            .reading-room-text {
                text-align: center;
                width: 100%;
            }

            .reading-room-books {
                width: 100%;
                height: 280px;
                min-height: 280px;
                justify-content: center;
                margin: 0 auto;
                position: relative;
            }

            .reading-room-book {
                height: 85%;
                max-height: none;
                position: absolute;
            }

            .reading-room-book-1 {
                transform: translateX(-90px) translateY(10px) rotate(-12deg) translateZ(0);
                z-index: 1;
            }

            .reading-room-book-2 {
                transform: translateX(0) translateY(0) rotate(-3deg) translateZ(0);
                z-index: 2;
            }

            .reading-room-book-3 {
                transform: translateX(90px) translateY(10px) rotate(10deg) translateZ(0);
                z-index: 3;
            }

            .reading-room-card:hover .reading-room-book-1,
            .reading-room-books:hover .reading-room-book-1 {
                transform: translateX(-100px) translateY(0) rotate(-14deg) translateZ(0);
            }

            .reading-room-card:hover .reading-room-book-2,
            .reading-room-books:hover .reading-room-book-2 {
                transform: translateX(0) translateY(-10px) rotate(-3deg) translateZ(0);
            }

            .reading-room-card:hover .reading-room-book-3,
            .reading-room-books:hover .reading-room-book-3 {
                transform: translateX(100px) translateY(0) rotate(12deg) translateZ(0);
            }
        }

        /* Additional 900px styles consolidated above */

        .archive-list {
            display: flex;
            flex-direction: column;
            gap: var(--space-4);
            margin-top: var(--space-4);
        }

        .archive-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: var(--space-4);
            background: rgba(252, 252, 253, 0.85); /* Semi-transparent */
            backdrop-filter: blur(8px);
            border-radius: var(--radius-lg);
            border: 1px solid var(--border-subtle);
            transition: all var(--transition-fast);
        }

        :root[data-theme="dark"] .archive-item {
            background: rgba(20, 20, 36, 0.85);
        }

        .archive-item:hover {
            border-color: var(--accent);
            background: var(--surface);
            transform: translateX(4px);
        }
        
        .archive-item:focus {
            outline: 2px solid var(--accent);
            outline-offset: 2px;
        }
        
        .archive-item:focus:not(:focus-visible) {
            outline: none;
        }
        
        .archive-item:focus-visible {
            outline: 2px solid var(--accent);
            outline-offset: 2px;
        }
        
        @media (max-width: 640px) {
            .archive-item {
                padding: var(--space-4);
                flex-direction: column;
                align-items: flex-start;
                gap: var(--space-2);
            }
            
            .archive-item:hover {
                transform: translateY(-2px);
            }
        }

        .archive-info {
            display: flex;
            flex-direction: column;
            gap: 2px;
        }

        .archive-name {
            font-weight: 700;
            font-size: var(--text-sm);
            color: var(--text-primary);
        }

        .archive-tag {
            font-size: var(--text-xs);
            color: var(--text-muted);
            text-transform: uppercase;
            letter-spacing: 0.05em;
        }

        .tool-list {
            display: flex;
            flex-wrap: wrap;
            gap: var(--space-2);
            margin-top: var(--space-4);
        }

        .tool-item {
            font-size: var(--text-xs);
            padding: var(--space-1) var(--space-3);
            background: var(--surface-elevated);
            border-radius: var(--radius-full);
            border: 1px solid var(--border-subtle);
            color: var(--text-secondary);
        }

        /* ===== TOOLS SECTION - INTERACTIVE PUZZLE PIECES ===== */
        .tools-section {
            margin-top: var(--space-4);
            perspective: 1000px;
        }

        .tools-title {
            font-family: var(--font-heading);
            font-size: clamp(2rem, 4vw, 2.75rem);
            font-weight: 700;
            letter-spacing: -0.02em;
            color: var(--text-primary);
            line-height: 1.1;
            margin-bottom: var(--space-3);
            letter-spacing: -0.02em;
            font-weight: 700;
        }

        .tools-subtitle {
            font-size: clamp(1.125rem, 2.5vw, 1.5rem);
            color: var(--text-secondary);
            margin-bottom: var(--space-8);
            line-height: 1.6;
            max-width: 680px;
        }

        /* Tools Network Graph - Contained Bubbles */
        .tools-network-container {
            position: relative;
            width: 100%;
            height: 650px;
            max-width: 1400px;
            margin: var(--space-8) auto;
            background: rgba(0, 0, 0, 0.02);
            overflow: visible;
            border-radius: var(--radius-2xl);
            opacity: 1 !important;
            visibility: visible !important;
        }

        #tools {
            overflow: visible;
            padding: var(--space-8) 0;
        }

        #tools .page-wrapper {
            max-width: 1400px;
            margin: 0 auto;
            padding: 0 var(--space-6);
        }

        #toolsNetwork {
            width: 100%;
            height: 100%;
        }

        .network-node {
            cursor: pointer;
            transition: filter 0.3s ease;
        }

        .network-node:hover {
            filter: brightness(1.15);
        }

        .network-node circle {
            transition: all 0.5s cubic-bezier(0.34, 1.56, 0.64, 1);
        }

        .network-node:hover circle.main-sphere {
            stroke-width: 4px;
            filter: url(#glass-sphere-hover);
        }

        /* Glass sphere styles */
        .network-node.featured circle.main-sphere {
            fill-opacity: 0.15;
            stroke: rgba(255, 255, 255, 0.8);
            stroke-width: 2.5px;
            filter: url(#glass-sphere);
        }

        .network-node:not(.featured) circle.main-sphere {
            fill-opacity: 0.12;
            stroke: rgba(255, 255, 255, 0.6);
            stroke-width: 2px;
            filter: url(#glass-sphere);
        }

        /* Dim other nodes when one is hovered */
        .tools-network-container.has-hover .network-node {
            opacity: 0.25;
            transition: opacity 0.4s ease;
        }

        .tools-network-container.has-hover .network-node:hover,
        .tools-network-container.has-hover .network-node.active {
            opacity: 1;
        }

        .network-link {
            stroke: rgba(100, 100, 120, 0.2);
            stroke-width: 1.5;
            transition: stroke 0.3s ease, stroke-width 0.3s ease;
        }

        .network-link.active {
            stroke: rgba(0, 112, 204, 0.4);
            stroke-width: 2.5;
        }

        .network-node-icon {
            pointer-events: none;
        }

        /* Node labels below bubbles - separate from chromatic filter */
        .node-labels {
            pointer-events: none;
        }
        
        .node-label {
            font-family: var(--font-sans);
            font-size: 14px;
            font-weight: 600;
            fill: var(--text-primary);
            text-anchor: middle;
            pointer-events: none;
            opacity: 1;
        }

        .node-label-desc {
            font-family: var(--font-sans);
            font-size: 11px;
            font-weight: 400;
            fill: var(--text-secondary);
            text-anchor: middle;
            pointer-events: none;
            opacity: 0.85;
        }
        
        /* Hide labels on mobile - not enough space */
        @media (max-width: 768px) {
            .node-labels {
                display: none;
            }
        }

        .network-tooltip {
            position: absolute;
            padding: 16px 20px;
            background: rgba(255, 255, 255, 0.85);
            backdrop-filter: blur(20px);
            border-radius: 16px;
            box-shadow: 0 12px 40px rgba(0, 0, 0, 0.2), inset 0 1px 0 rgba(255,255,255,0.5);
            pointer-events: none;
            opacity: 0;
            transition: opacity 0.2s ease, transform 0.2s ease;
            z-index: 100;
            font-size: var(--text-sm);
            max-width: 260px;
            border: 1px solid rgba(255,255,255,0.3);
            transform: translateY(10px);
        }

        .network-tooltip.visible {
            transform: translateY(0);
        }

        .network-tooltip.visible {
            opacity: 1;
        }

        .network-tooltip-title {
            font-weight: 700;
            color: var(--text-primary);
            margin-bottom: 4px;
        }

        .network-tooltip-desc {
            color: var(--text-secondary);
            font-size: var(--text-xs);
            line-height: 1.4;
        }

        /* Node pulse animation for featured tools */
        @keyframes nodePulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.02); }
        }

        .network-node.featured circle {
            animation: nodePulse 3s ease-in-out infinite;
        }

        /* Responsive */
        @media (max-width: 768px) {
            .tools-network-container {
                height: 500px;
                min-height: 500px;
                width: 100%;
                max-width: 100%;
                overflow: visible;
            }

            #tools {
                padding: var(--space-6) 0;
                overflow: hidden;
            }

            #tools .page-wrapper {
                padding: 0 var(--space-4);
            }

            #tools .section-header,
            #tools .tools-title,
            #tools .tools-subtitle {
                padding: 0;
            }

            #toolsNetwork {
                width: 100%;
                height: 100%;
            }
        }

        #tools .page-wrapper {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 var(--space-6);
        }



        .tool-card:hover::before {
            opacity: 1;
        }

        :root[data-theme="dark"] .tool-card {
            background: linear-gradient(145deg, 
                rgba(35, 35, 55, 0.95) 0%, 
                rgba(25, 25, 40, 0.9) 100%);
        }

        /* Size hierarchy based on usage */
        .tool-card.size-xl {
            grid-column: span 2;
            grid-row: span 2;
        }

        .tool-card.size-lg {
            grid-column: span 2;
        }

        .tool-card.size-sm {
            grid-column: span 1;
        }

        .tool-card.size-xs {
            grid-column: span 1;
        }

        /* Brand colors for glow effects */
        .tool-card[data-brand="cursor"] { --glow-color: rgba(0, 0, 0, 0.3); --glow-size: 30px; }
        .tool-card[data-brand="figma"] { --glow-color: rgba(162, 89, 255, 0.4); --glow-size: 40px; }
        .tool-card[data-brand="claude"] { --glow-color: rgba(212, 162, 118, 0.4); --glow-size: 35px; }
        .tool-card[data-brand="kimi"] { --glow-color: rgba(99, 102, 241, 0.4); --glow-size: 35px; }
        .tool-card[data-brand="lovable"] { --glow-color: rgba(255, 107, 107, 0.4); --glow-size: 25px; }
        .tool-card[data-brand="chatgpt"] { --glow-color: rgba(16, 163, 127, 0.4); --glow-size: 30px; }
        .tool-card[data-brand="v0"] { --glow-color: rgba(0, 0, 0, 0.25); --glow-size: 20px; }
        .tool-card[data-brand="illustrator"] { --glow-color: rgba(255, 154, 0, 0.3); --glow-size: 20px; }
        .tool-card[data-brand="photoshop"] { --glow-color: rgba(49, 168, 255, 0.3); --glow-size: 20px; }
        .tool-card[data-brand="notion"] { --glow-color: rgba(0, 0, 0, 0.2); --glow-size: 15px; }
        .tool-card[data-brand="miro"] { --glow-color: rgba(255, 207, 0, 0.3); --glow-size: 15px; }

        :root[data-theme="dark"] .tool-card[data-brand="cursor"] { --glow-color: rgba(255, 255, 255, 0.2); }
        :root[data-theme="dark"] .tool-card[data-brand="v0"] { --glow-color: rgba(255, 255, 255, 0.15); }

        /* 3D Hover effect - lift toward camera */
        .tool-card:hover {
            transform: translateZ(30px) translateY(-8px) scale(1.03);
            box-shadow: 
                0 20px 40px rgba(0, 0, 0, 0.15),
                0 0 30px rgba(0, 0, 0, 0.1);
            z-index: 10;
        }

        /* Category indicator bar at top */
        .tool-category-indicator {
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 4px;
            opacity: 0.8;
            transition: height 0.3s ease, opacity 0.3s ease;
        }

        .tool-card:hover .tool-category-indicator {
            height: 6px;
            opacity: 1;
        }

        /* Icon styling - BIGGER icons, LESS padding */
        .tool-icon-wrap {
            width: 100%;
            height: 75px;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: transform 0.3s ease;
            padding: 2px;
            flex-shrink: 0;
            margin-top: 4px;
        }

        .tool-card:hover .tool-icon-wrap {
            transform: scale(1.08);
        }

        .tool-icon-img, .tool-icon-svg {
            max-width: 95%;
            max-height: 95%;
            width: auto;
            height: auto;
            object-fit: contain;
            filter: drop-shadow(0 4px 12px rgba(0,0,0,0.1));
            transition: all 0.3s ease;
        }

        /* Always-visible info panel */
        .tool-info-panel {
            width: 100%;
            text-align: center;
            padding: var(--space-2) 0 0;
            margin-top: auto;
        }

        .tool-name-reveal {
            font-size: var(--text-base);
            font-weight: 700;
            color: var(--text-primary);
            margin-bottom: 4px;
            line-height: 1.2;
        }

        .tool-desc-reveal {
            font-size: var(--text-sm);
            color: var(--text-secondary);
            line-height: 1.4;
            display: -webkit-box;
            -webkit-line-clamp: 2;
            -webkit-box-orient: vertical;
            overflow: hidden;
        }

        /* Idle animation - subtle fidget */
        @keyframes tool-fidget {
            0%, 100% { transform: rotate(0deg); }
            25% { transform: rotate(0.5deg); }
            75% { transform: rotate(-0.5deg); }
        }

        .tool-card {
            animation: tool-fidget 4s ease-in-out infinite;
            animation-delay: calc(var(--fidget-delay, 0) * 0.5s);
        }

        .tool-card:nth-child(1) { --fidget-delay: 0; }
        .tool-card:nth-child(2) { --fidget-delay: 1; }
        .tool-card:nth-child(3) { --fidget-delay: 2; }
        .tool-card:nth-child(4) { --fidget-delay: 3; }
        .tool-card:nth-child(5) { --fidget-delay: 4; }
        .tool-card:nth-child(6) { --fidget-delay: 5; }
        .tool-card:nth-child(7) { --fidget-delay: 6; }
        .tool-card:nth-child(8) { --fidget-delay: 7; }
        .tool-card:nth-child(9) { --fidget-delay: 8; }
        .tool-card:nth-child(10) { --fidget-delay: 9; }

        .tool-card:hover {
            animation: none;
        }

        /* Featured Tool Cards - Most Used */
        .tool-card-featured {
            grid-column: span 2;
            grid-row: span 2;
            min-height: 180px;
        }

        .tool-card-featured .tool-icon-wrap {
            height: 100px;
        }

        .tool-card-featured .tool-name-reveal {
            font-size: var(--text-lg);
        }

        .tool-card-featured .tool-desc-reveal {
            font-size: var(--text-sm);
        }

        /* Primary Tool Cards */
        .tool-card-primary {
            min-height: 150px;
        }

        .tool-card-primary .tool-icon-wrap {
            height: 85px;
        }

        /* Size classes - no longer used but kept for compatibility */
        .tool-card.size-xl,
        .tool-card.size-lg,
        .tool-card.size-sm,
        .tool-card.size-xs {
            grid-column: span 1;
            grid-row: span 1;
        }

        /* Responsive */


        @media (max-width: 768px) {
            .tools-puzzle-grid {
                grid-template-columns: repeat(4, 1fr);
                gap: 10px;
                max-width: 100%;
                padding: var(--space-2);
            }

            .tool-card {
                min-height: 120px;
                padding: var(--space-1);
                border-radius: 12px;
            }

            .tool-icon-wrap {
                height: 55px;
                padding: 2px;
            }

            .tool-icon-img, .tool-icon-svg {
                max-width: 95%;
                max-height: 95%;
            }

            .tool-name-reveal {
                font-size: var(--text-xs);
            }

            .tool-desc-reveal {
                font-size: 11px;
            }
        }

        @media (max-width: 640px) {
            #tools .page-wrapper {
                padding: 0 var(--space-4);
            }

        }

        /* Dark theme adjustments */
        :root[data-theme="dark"] .tool-icon-img[alt="Framer"],
        :root[data-theme="dark"] .tool-icon-img[alt="v0"],
        :root[data-theme="dark"] .tool-icon-img[alt="ChatGPT"],
        :root[data-theme="dark"] .tool-icon-img[src*="openai"],
        :root[data-theme="dark"] .tool-icon-img[src*="black-mark"],
        :root[data-theme="dark"] .tool-icon-img[src*="61rpPdHqfL9PIdlF6WUsRNg40o269b"] {
            filter: invert(1);
        }

        /* ===== FOOTER ===== */
        .footer {
            padding: var(--space-16) 0 var(--space-8);
            border-top: 1px solid var(--border-subtle);
            background: transparent; /* Make footer transparent too */
            position: relative;
            z-index: 1000;
        }

        .footer-grid {
            display: grid;
            grid-template-columns: repeat(12, 1fr);
            gap: var(--space-12);
            margin-bottom: var(--space-12);
        }

        .footer-col:nth-child(1) { grid-column: span 4; }
        .footer-col:nth-child(2) { grid-column: span 3; }
        .footer-col:nth-child(3) { grid-column: span 5; }

        @media (max-width: 900px) {
            .footer-grid {
                grid-template-columns: repeat(12, 1fr);
                gap: var(--space-8);
            }
            .footer-col:nth-child(1),
            .footer-col:nth-child(2) { grid-column: span 6; }
            .footer-col:nth-child(3) { grid-column: span 12; }
        }

        @media (max-width: 640px) {
            .footer {
                padding: var(--space-8) 0 var(--space-6);
            }
            
            .footer-grid {
                grid-template-columns: 1fr;
                gap: var(--space-6);
            }
            
            .footer-col:nth-child(1),
            .footer-col:nth-child(2),
            .footer-col:nth-child(3) {
                grid-column: span 1;
            }
            
            .archive-item {
                padding: var(--space-4);
                flex-direction: column;
                align-items: flex-start;
                gap: var(--space-2);
            }
        }

        .footer-col-title {
            font-size: var(--text-xs);
            font-weight: 700;
            text-transform: uppercase;
            letter-spacing: 0.1em;
            color: var(--text-muted);
            margin-bottom: var(--space-6);
        }

        .footer-links {
            display: flex;
            flex-direction: column;
            gap: var(--space-3);
        }

        .footer-link {
            font-size: var(--text-sm);
            color: var(--text-secondary);
            font-weight: 500;
            transition: all var(--transition-fast);
            display: inline-flex;
            align-items: center;
            gap: var(--space-2);
        }

        .footer-link:hover {
            color: var(--text-primary);
            transform: translateX(4px);
        }

        .footer-bottom {
            padding-top: var(--space-8);
            border-top: 1px solid var(--border-subtle);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .footer-bottom p {
            font-size: var(--text-xs);
            color: var(--text-muted);
            font-weight: 500;
        }
        
        @media (max-width: 640px) {
            .footer-bottom {
                flex-direction: column;
                gap: var(--space-2);
                text-align: center;
                padding-top: var(--space-6);
            }
        }

        /* ===== INSTAGRAM GALLERY ===== */
        #instagram {
            position: relative;
            z-index: 1;
            padding-bottom: var(--space-16);
            width: 100%;
            overflow: hidden;
        }
        
        #instagram .page-wrapper {
            max-width: 1400px;
            margin: 0 auto;
            padding: 0 var(--space-6);
            text-align: center;
        }

        .instagram-description {
            margin-bottom: var(--space-12);
            max-width: 100%;
        }

        @media (max-width: 768px) {
            .instagram-description {
                margin-bottom: var(--space-8);
            }
        }

        .instagram-fullbleed {
            width: 100%;
            max-width: 100%;
            margin: var(--space-8) auto 0;
            position: relative;
            display: flex;
            justify-content: center;
            align-items: center;
            box-sizing: border-box;
        }

        /* Remove Behold's internal padding */
        behold-widget {
            --behold-padding: 0px;
            width: 100%;
            display: block;
        }

        #instagram behold-widget {
            display: block;
            width: 100%;
            max-width: 100%;
        }

        /* Target all elements within the Instagram section to ensure full width */
        #instagram * {
            max-width: 100%;
        }

        /* Make images fill their containers */
        #instagram img {
            width: 100% !important;
            height: 100% !important;
            object-fit: cover !important;
            display: block !important;
            border-radius: var(--radius-md);
        }
        
        @media (max-width: 640px) {
            #instagram {
                padding: 0 0 var(--space-12) 0;
            }
            
            #instagram .page-wrapper {
                padding: 0 var(--space-4);
            }
            
            #instagram .posts {
                gap: 8px !important;
            }
            
            .instagram-fullbleed {
                width: 100%;
                max-width: 100%;
                margin: var(--space-6) auto 0;
            }
        }

        /* Ensure Behold grid container is centered with page grid */
        .instagram-fullbleed figure.container,
        .instagram-fullbleed > * {
            max-width: 100% !important;
            width: 100% !important;
            padding: 0 !important;
            margin: 0 auto !important;
            box-sizing: border-box !important;
        }
        
        /* Ensure the widget respects the container bounds */
        .instagram-fullbleed behold-widget {
            max-width: 100% !important;
        }

        /* Center the grid within Behold widget */
        .instagram-fullbleed behold-widget {
            display: block !important;
            width: 100% !important;
            max-width: 100% !important;
        }

        .instagram-fullbleed behold-widget::part(container) {
            width: 100% !important;
            max-width: 100% !important;
            margin: 0 auto !important;
            padding: 0 !important;
        }

        /* Target the internal grid layout */
        .instagram-fullbleed .posts,
        .instagram-fullbleed [class*="grid"] {
            display: grid !important;
            width: 100% !important;
            max-width: 100% !important;
            margin: 0 auto !important;
            justify-content: center !important;
            padding: 0 !important;
        }
        
        /* Reduce gap in the posts grid */
        .instagram-fullbleed .posts {
            gap: 12px !important;
        }

        /* Ensure grid items fill width */
        .instagram-fullbleed [class*="grid"] > *,
        .instagram-fullbleed [class*="item"],
        .instagram-fullbleed [class*="post"] {
            width: 100% !important;
            max-width: 100% !important;
        }
        
        /* Make images fill their containers in full-bleed */
        .instagram-fullbleed img {
            width: 100% !important;
            height: 100% !important;
            object-fit: cover !important;
            display: block !important;
        }
    </style>

    <!-- PostHog Analytics -->
    <script>
        !function(t,e){var o,n,p,r;e.__SV||(window.posthog=e,e._i=[],e.init=function(i,s,a){function g(t,e){var o=e.split(".");2==o.length&&(t=t[o[0]],e=o[1]),t[e]=function(){t.push([e].concat(Array.prototype.slice.call(arguments,0)))}}(p=t.createElement("script")).type="text/javascript",p.crossOrigin="anonymous",p.async=!0,p.src=s.api_host.replace(".i.posthog.com","-assets.i.posthog.com")+"/static/array.js",(r=t.getElementsByTagName("script")[0]).parentNode.insertBefore(p,r);var u=e;for(void 0!==a?u=e[a]=[]:a="posthog",u.people=u.people||[],u.toString=function(t){var e="posthog";return"posthog"!==a&&(e+="."+a),t||(e+=" (stub)"),e},u.people.toString=function(){return u.toString(1)+".people (stub)"},o="init capture register register_once register_for_session unregister unregister_for_session getFeatureFlag getFeatureFlagPayload isFeatureEnabled reloadFeatureFlags updateEarlyAccessFeatureEnrollment getEarlyAccessFeatures on onFeatureFlags onSessionId getSurveys getActiveMatchingSurveys renderSurvey canRenderSurvey get_distinct_id getGroups get_session_id get_session_replay_url alias set_config startSessionRecording stopSessionRecording sessionRecordingStarted captureException loadToolbar get_property getSessionProperty createPersonProfile opt_in_capturing opt_out_capturing has_opted_in_capturing has_opted_out_capturing clear_opt_in_out_capturing debug".split(" "),n=0;n<o.length;n++)g(u,o[n]);e._i.push([i,s,a])},e.__SV=1)}(document,window.posthog||[]);
        posthog.init('phc_53W2e8j14bMWQ8BDIEtwfuhMItLIUB2jvkuTJcstz0V', {
            api_host: 'https://us.i.posthog.com',
            person_profiles: 'identified_only',
            session_recording: {
                recordCanvas: true,
                recordCrossOriginIframes: false,
                maskAllInputs: true,
                maskTextSelector: '*'
            },
            capture_pageview: true,
            capture_pageleave: true
        })
    </script>
</head>
<body>
    <script>document.documentElement.classList.add('hero-loading');</script>
    <!-- Hexagon Grid Background -->
    <div class="hexagon-background" id="hexBackground">
        <svg id="hexSvg" xmlns="http://www.w3.org/2000/svg" preserveAspectRatio="xMidYMid slice" width="100%" height="100%">
            <!-- Lines will be dynamically generated here -->
        </svg>
    </div>

    <nav class="nav-container">
        <div class="nav-name">Luke Niccol</div>
        
        <div class="pill-nav">
            <a href="#about" class="nav-link active">About</a>
            <a href="#tools" class="nav-link">Tools</a>
            <a href="#work" class="nav-link">Work</a>
            <a href="#library" class="nav-link">Library</a>
        </div>
        
        <div class="secondary-nav">
            <a href="/my-journey" class="nav-link">My Journal</a>
            <a href="playground.html" class="playground-btn" aria-label="Open Playground">
                <span class="shimmer"></span>
                <span class="btn-text">
                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                        <polygon points="5 3 19 12 5 21 5 3"></polygon>
                    </svg>
                    Playground
                </span>
            </a>
        </div>

        <div class="nav-info">
            <div id="current-time">05:59 PM [SYD]</div>
            <div id="current-date">15 JANUARY 2026</div>
        </div>
        
        <div class="top-controls">
            <button class="theme-toggle" onclick="toggleTheme()" aria-label="Toggle dark mode" type="button">
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z"/></svg>
            </button>
            <button class="mobile-menu-toggle" onclick="toggleMobileMenu()" aria-label="Toggle menu">
                <span></span>
                <span></span>
                <span></span>
            </button>
        </div>
    </nav>

    <div class="mobile-menu">
        <button class="mobile-menu-close" onclick="toggleMobileMenu()" aria-label="Close menu" type="button">
            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2" aria-hidden="true">
                <path stroke-linecap="round" stroke-linejoin="round" d="M6 18L18 6M6 6l12 12" />
            </svg>
            <span class="mobile-menu-close-text">Close</span>
        </button>
        <a href="#about" class="mobile-menu-link" onclick="toggleMobileMenu()">About</a>
        <a href="#tools" class="mobile-menu-link" onclick="toggleMobileMenu()">Tools</a>
        <a href="#work" class="mobile-menu-link" onclick="toggleMobileMenu()">Work</a>
        <a href="#library" class="mobile-menu-link" onclick="toggleMobileMenu()">Library</a>
        <a href="/my-journey" class="mobile-menu-link" onclick="toggleMobileMenu()">My Journal</a>
        <div style="margin-top: var(--space-8);">
            <button class="theme-toggle" onclick="toggleTheme(); toggleMobileMenu();" aria-label="Toggle dark mode" type="button" style="width: 48px; height: 48px; background: var(--border-default);">
                <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z"/></svg>
            </button>
        </div>
    </div>

    <div class="page-wrapper">
        <!-- ABOUT ME -->
        <section id="about">
            <div class="about-grid grid-layout">
                <div class="hero-text">
                    <h1 class="hero-title">I find the fastest path from problem to product.</h1>
                    <h2 class="hero-subtitle">By understanding people and systems, I design clear, scalable solutions that actually ship.</h2>
                    <div class="hero-cta">
                        <a href="mailto:luke.niccol@hotmail.com" class="cta-primary">
                            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor">
                                <path d="M20 4H4c-1.1 0-1.99.9-1.99 2L2 18c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm0 4l-8 5-8-5V6l8 5 8-5v2z"/>
                            </svg>
                            Email me
                        </a>
                        <a href="https://www.linkedin.com/in/luke-niccol-479489220/" target="_blank" class="cta-secondary">
                            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor">
                                <path d="M20.447 20.452h-3.554v-5.569c0-1.328-.027-3.037-1.852-3.037-1.853 0-2.136 1.445-2.136 2.939v5.667H9.351V9h3.414v1.561h.046c.477-.9 1.637-1.85 3.37-1.85 3.601 0 4.267 2.37 4.267 5.455v6.286zM5.337 7.433c-1.144 0-2.063-.926-2.063-2.065 0-1.138.92-2.063 2.063-2.063 1.14 0 2.064.925 2.064 2.063 0 1.139-.925 2.065-2.064 2.065zm1.782 13.019H3.555V9h3.564v11.452zM22.225 0H1.771C.792 0 0 .774 0 1.729v20.542C0 23.227.792 24 1.771 24h20.451C23.2 24 24 23.227 24 22.271V1.729C24 .774 23.2 0 22.222 0h.003z"/>
                            </svg>
                            LinkedIn
                        </a>
                    </div>
                </div>
                <div class="hero-gallery" id="heroGallery">
                    <div class="hero-gallery-reveal" id="heroGalleryReveal"></div>
                    <div class="hero-gallery-stack">
                        <div class="hero-gallery-item" data-index="0" data-src="Headshoty%20gallery/web%20p%20versions/1.webp">
                            <img src="Headshoty%20gallery/web%20p%20versions/1.webp" alt="" class="strip-img">
                        </div>
                        <div class="hero-gallery-item" data-index="1" data-src="Headshoty%20gallery/web%20p%20versions/2.webp">
                            <img src="Headshoty%20gallery/web%20p%20versions/2.webp" alt="" class="strip-img">
                        </div>
                        <div class="hero-gallery-item" data-index="2" data-src="Headshoty%20gallery/web%20p%20versions/3.webp">
                            <img src="Headshoty%20gallery/web%20p%20versions/3.webp" alt="" class="strip-img">
                        </div>
                        <div class="hero-gallery-item" data-index="3" data-src="Headshoty%20gallery/web%20p%20versions/4.webp">
                            <img src="Headshoty%20gallery/web%20p%20versions/4.webp" alt="" class="strip-img">
                        </div>
                        <div class="hero-gallery-item" data-index="4" data-src="Headshoty%20gallery/web%20p%20versions/5.webp">
                            <img src="Headshoty%20gallery/web%20p%20versions/5.webp" alt="" class="strip-img">
                        </div>
                        <div class="hero-gallery-item" data-index="5" data-src="Headshoty%20gallery/web%20p%20versions/6.webp">
                            <img src="Headshoty%20gallery/web%20p%20versions/6.webp" alt="" class="strip-img">
                        </div>
                        <div class="hero-gallery-item" data-index="6" data-src="Headshoty%20gallery/web%20p%20versions/7.webp">
                            <img src="Headshoty%20gallery/web%20p%20versions/7.webp" alt="" class="strip-img">
                        </div>
                        <div class="hero-gallery-item" data-index="7" data-src="Headshoty%20gallery/web%20p%20versions/8.webp">
                            <img src="Headshoty%20gallery/web%20p%20versions/8.webp" alt="" class="strip-img">
                        </div>
                        <div class="hero-gallery-item" data-index="8" data-src="Headshoty%20gallery/web%20p%20versions/9.webp">
                            <img src="Headshoty%20gallery/web%20p%20versions/9.webp" alt="" class="strip-img">
                        </div>
                        <div class="hero-gallery-item" data-index="9" data-src="Headshoty%20gallery/web%20p%20versions/10.webp">
                            <img src="Headshoty%20gallery/web%20p%20versions/10.webp" alt="" class="strip-img">
                        </div>
                        <div class="hero-gallery-item" data-index="10" data-src="Headshoty%20gallery/web%20p%20versions/11.webp">
                            <img src="Headshoty%20gallery/web%20p%20versions/11.webp" alt="" class="strip-img">
                        </div>
                        <div class="hero-gallery-item" data-index="11" data-src="Headshoty%20gallery/web%20p%20versions/12.webp">
                            <img src="Headshoty%20gallery/web%20p%20versions/12.webp" alt="" class="strip-img">
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- TOOLS I USE - ORGANIZED BY CATEGORY -->
        <section id="tools" class="tools-section" style="padding-bottom: var(--space-16);">
            <div class="page-wrapper">
                <div class="section-header">
                    <span class="section-label">My favorite tools</span>
                    <div class="line"></div>
                </div>
                
                <h2 class="tools-title">Tools I use everyday</h2>
                <p class="tools-subtitle">My essential toolkit organized by how I use them in my workflow.</p>

            <!-- Tools Network Graph -->
            <div class="tools-network-container">
                <svg id="toolsNetwork"></svg>
                <div class="network-tooltip"></div>
            </div>

            </div>
        </section>

    <!-- WORK SECTION – Awwwards Level Design -->
    <section id="work" class="work-section-clean">
        <div class="page-wrapper">
            <div class="work-header">
                <div class="section-header">
                    <span class="section-label">Selected Work</span>
                    <div class="line"></div>
                </div>
                
                <h2 class="work-section-title">Featured Projects</h2>
                <p class="work-section-subtitle">A curated selection of case studies showcasing product strategy, UX/UI design, and design systems.</p>
                

            </div>
            
            <!-- Uniform Grid – All Cards Same Size -->
            <div class="work-bento-grid">
                
                <!-- Project 1: Drova -->
                <article class="work-card" data-project="drova" data-category="strategy uxui">
                    <a href="work/drovasignup/index.html" class="work-card-link">
                        <div class="work-card-image">
                            <img src="./framerusercontent.com/images/S1G2k3PW2nLTX6qcqPrFdG3qosd526.png" alt="Drova - From sales-led to product-led" loading="lazy">
                        </div>
                        <div class="work-card-content">
                            <div class="work-card-meta">
                                <span class="work-card-tag">Product Strategy</span>
                                <span class="work-card-tag">UX/UI</span>
                            </div>
                            <h3 class="work-card-title">From sales-led to product-led</h3>
                            <p class="work-card-client">Drova</p>
                        </div>
                    </a>
                </article>

                <!-- Project 2: Foragecaster -->
                <article class="work-card" data-project="foragecaster" data-category="uxui">
                    <a href="work/foragecaster/index.html" class="work-card-link">
                        <div class="work-card-image">
                            <img src="./framerusercontent.com/images/57q2kvLuW7NUdpZ4hXAixfJtU3c90ee.png" alt="Foragecaster - Farm forecasting" loading="lazy">
                        </div>
                        <div class="work-card-content">
                            <div class="work-card-meta">
                                <span class="work-card-tag">UX/UI Design</span>
                            </div>
                            <h3 class="work-card-title">Farm forecasting with AI</h3>
                            <p class="work-card-client">UTS × AgriWebb</p>
                        </div>
                    </a>
                </article>

                <!-- Project 3: GGSA -->
                <article class="work-card" data-project="ggsa" data-category="system uxui">
                    <a href="work/ggsa/index.html" class="work-card-link">
                        <div class="work-card-image">
                            <img src="assets/GGsa cover new.webp" alt="GGSA - Design System" loading="lazy">
                        </div>
                        <div class="work-card-content">
                            <div class="work-card-meta">
                                <span class="work-card-tag">Design System</span>
                            </div>
                            <h3 class="work-card-title">Platform redesign & design system</h3>
                            <p class="work-card-client">Good to Great Schools</p>
                        </div>
                    </a>
                </article>

                <!-- Project 4: KG2 -->
                <article class="work-card" data-project="kg2" data-category="uxui">
                    <a href="work/rpp/index.html" class="work-card-link">
                        <div class="work-card-image">
                            <img src="./framerusercontent.com/images/NY8ci5ivCtGD6oyjUJZbr0OG0g.jpg" alt="KG2 - Rural Property Platform" loading="lazy">
                        </div>
                        <div class="work-card-content">
                            <div class="work-card-meta">
                                <span class="work-card-tag">UI Design</span>
                                <span class="work-card-tag">Development</span>
                            </div>
                            <h3 class="work-card-title">Connecting users to farmer data</h3>
                            <p class="work-card-client">KG2</p>
                        </div>
                    </a>
                </article>

            </div>
        </div>
    </section>

    <!-- FREELANCE & CLIENT WORK -->
    <section id="other-projects" class="other-projects-section">
        <div class="page-wrapper">
            <div class="section-header">
                <span class="section-label">Beyond the 9-5</span>
                <div class="line"></div>
            </div>

            <h2 class="section-title">Freelance & Collaborations</h2>
            
            <p class="section-subtitle" style="max-width: 600px; margin-bottom: var(--space-8); color: var(--text-secondary);">
                Alongside my full-time roles, I partner with studios and businesses to help bring their digital products to life. Here's a glimpse of recent collaborations.
            </p>

            <div class="other-projects-grid">
                <!-- Lunic Studio -->
                <a href="https://www.lunicstudio.com/" target="_blank" rel="noopener noreferrer" class="other-project-card">
                    <div class="other-project-image" style="background: #ffffff; display: flex; align-items: center; justify-content: center; padding: var(--space-6);">
                        <img src="blue-logotype.svg" alt="Lunic Studio" loading="lazy" style="width: 80%; height: auto; object-fit: contain;">
                    </div>
                    <div class="other-project-content">
                        <h3 class="other-project-title">Lunic Studio</h3>
                        <p class="other-project-description">Ongoing design and development partnership. I help Lunic Studio deliver high-quality web experiences for their diverse client portfolio.</p>
                        <div class="other-project-tags">
                            <span class="tag">Web Design</span>
                            <span class="tag">Development</span>
                            <span class="tag">Ongoing Partnership</span>
                        </div>
                        <span class="other-project-link">Visit Studio →</span>
                    </div>
                </a>

                <!-- Hariz Crane Trucks -->
                <a href="https://hariz-crane-trucks.vercel.app/" target="_blank" rel="noopener noreferrer" class="other-project-card">
                    <div class="other-project-image">
                        <video autoplay muted loop playsinline poster="assets/hariz-crane-screenshot.webp">
                            <source src="Hariz crane trucks.mp4" type="video/mp4">
                        </video>
                    </div>
                    <div class="other-project-content">
                        <h3 class="other-project-title">Hariz Crane Trucks</h3>
                        <p class="other-project-description">Complete brand identity and website for a Sydney-based crane truck company. From logo to launch in 4 weeks.</p>
                        <div class="other-project-tags">
                            <span class="tag">Branding</span>
                            <span class="tag">Web Design</span>
                            <span class="tag">Solo Project</span>
                        </div>
                        <span class="other-project-link">View Project →</span>
                    </div>
                </a>
            </div>
        </div>
    </section>

    <!-- READING ROOM -->
    <section id="library">
        <div class="page-wrapper">
            <div class="section-header">
                <span class="section-label">Reading Room</span>
                <div class="line"></div>
            </div>
            <a href="reading-room" class="reading-room-card">
                <div class="reading-room-content">
                    <div class="reading-room-text">
                        <span class="reading-room-label">Reading Room</span>
                        <h3 class="reading-room-title">My library</h3>
                        <p class="reading-room-description">Documenting my reading habits and the books I've read over the last couple of years.</p>
                    </div>
                    <div class="reading-room-books">
                        <img src="reading-room/Book covers/never split the difference.webp" alt="Never Split the Difference" class="reading-room-book reading-room-book-1">
                        <img src="reading-room/Book covers/just enough research.webp" alt="Just Enough Research" class="reading-room-book reading-room-book-2">
                        <img src="reading-room/Book covers/Practical ui.webp" alt="Practical UI" class="reading-room-book reading-room-book-3">
                    </div>
                </div>
                <div class="reading-room-arrow">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round">
                        <line x1="5" y1="12" x2="19" y2="12"></line>
                        <polyline points="12 5 19 12 12 19"></polyline>
                    </svg>
                </div>
            </a>
        </div>
    </section>

    <!-- INSTAGRAM GALLERY -->
    <section id="instagram" style="padding-top: 0;">
        <div class="page-wrapper">
            <div class="section-header">
                <span class="section-label">Selected Instagram Posts</span>
                <div class="line"></div>
            </div>
            
            <div class="instagram-description">
                <p style="font-size: var(--text-lg); line-height: 1.5; color: var(--text-secondary); margin-bottom: var(--space-4);">
                    I use Instagram to share my design experiments, process work, and latest UI/UX explorations. This is where I post my daily design work and creative experiments.
                </p>
                <a href="https://www.instagram.com/lukeniccoldesign/" target="_blank" style="display: inline-flex; align-items: center; gap: 8px; color: var(--accent); text-decoration: none; font-weight: 600; font-size: var(--text-base);">
                    Follow along @lukeniccoldesign 
                    <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"><path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"></path><polyline points="15 3 21 3 21 9"></polyline><line x1="10" y1="14" x2="21" y2="3"></line></svg>
                </a>
            </div>
            
            <!-- Instagram grid aligned with page grid -->
            <div class="instagram-fullbleed">
                <behold-widget feed-id="TDixyrqBv7rsskokkxnG"></behold-widget>
            </div>
        </div>
        
        <script>
                  (() => {
                    const d=document,s=d.createElement("script");s.type="module";
                    s.src="https://w.behold.so/widget.js";d.head.append(s);
                    
                    // Function to ensure Behold widget is full width
                    function scaleInstagramImages() {
                      const instagramSection = document.getElementById('instagram');
                      if (!instagramSection) return;
                      
                      const widget = instagramSection.querySelector('behold-widget');
                      if (!widget) return;
                      
                      // Try to reach into Shadow DOM
                      const shadow = widget.shadowRoot;
                      if (shadow) {
                        const container = shadow.querySelector('.container') || shadow.querySelector('figure');
                        if (container) {
                          container.style.maxWidth = '100%';
                          container.style.width = '100%';
                          container.style.padding = '0';
                          container.style.margin = '0 auto';
                        }
                        
                        const posts = shadow.querySelector('.posts') || shadow.querySelector('[class*="grid"]');
                        if (posts) {
                          posts.style.gap = '12px';
                        }
                      }
                      
                      // Fallback for Light DOM
                      const figureContainer = widget.querySelector('figure.container') || instagramSection.querySelector('figure.container');
                      if (figureContainer) {
                        figureContainer.style.maxWidth = '100%';
                        figureContainer.style.width = '100%';
                        figureContainer.style.padding = '0';
                        figureContainer.style.margin = '0 auto';
                      }
                      
                      const postsGrid = widget.querySelector('.posts') || instagramSection.querySelector('.posts');
                      if (postsGrid) {
                        postsGrid.style.gap = '12px';
                      }
                      
                      widget.style.padding = '0';
                      widget.style.width = '100%';
                      widget.style.display = 'block';
                    }
                    
                    // Run immediately and then watch for changes
                    setTimeout(scaleInstagramImages, 1000);
                    setTimeout(scaleInstagramImages, 3000);
                    
                    // Use MutationObserver to watch for widget loading
                    const observer = new MutationObserver(() => {
                      scaleInstagramImages();
                    });
                    
                    const instagramSectionForObserver = document.getElementById('instagram');
                    if (instagramSectionForObserver) {
                      observer.observe(instagramSectionForObserver, {
                        childList: true,
                        subtree: true
                      });
                    }
                  })();
                </script>
    </section>


    <footer class="footer">
        <div class="page-wrapper">
            <div class="footer-grid grid-layout">
                <!-- Socials -->
                <div class="footer-col">
                    <div class="footer-col-title">Connect</div>
                    <div class="footer-links">
                        <a href="https://www.linkedin.com/in/luke-niccol-479489220/" target="_blank" class="footer-link">
                            <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor" style="margin-right: 8px;"><path d="M20.447 20.452h-3.554v-5.569c0-1.328-.027-3.037-1.852-3.037-1.853 0-2.136 1.445-2.136 2.939v5.667H9.351V9h3.414v1.561h.046c.477-.9 1.637-1.85 3.37-1.85 3.601 0 4.267 2.37 4.267 5.455v6.286zM5.337 7.433a2.062 2.062 0 0 1-2.063-2.065 2.064 2.064 0 1 1 2.063 2.065zm1.782 13.019H3.555V9h3.564v11.452zM22.225 0H1.771C.792 0 0 .774 0 1.729v20.542C0 23.227.792 24 1.771 24h20.451C23.2 24 24 23.227 24 22.271V1.729C24 .774 23.2 0 22.222 0h.003z"/></svg>
                            LinkedIn 
                            <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round" style="margin-left: 6px;"><path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"></path><polyline points="15 3 21 3 21 9"></polyline><line x1="10" y1="14" x2="21" y2="3"></line></svg>
                        </a>
                        <a href="https://www.instagram.com/lukeniccoldesign/" target="_blank" class="footer-link">
                            <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor" style="margin-right: 8px;"><path d="M7.03.084c-1.277.06-2.149.264-2.91.563a5.874 5.874 0 0 0-2.124 1.388 5.878 5.878 0 0 0-1.38 2.127C.321 4.926.12 5.8.064 7.076.008 8.354-.005 8.764.001 12.023c.007 3.259.021 3.667.083 4.947.061 1.277.264 2.149.563 2.911.308.789.72 1.457 1.388 2.123a5.872 5.872 0 0 0 2.129 1.38c.763.295 1.636.496 2.913.552 1.278.056 1.689.069 4.947.063 3.257-.007 3.668-.021 4.947-.082 1.28-.06 2.147-.265 2.91-.563a5.881 5.881 0 0 0 2.123-1.388 5.881 5.881 0 0 0 1.38-2.129c.295-.763.496-1.636.551-2.912.056-1.28.07-1.69.063-4.948-.006-3.258-.02-3.667-.081-4.947-.06-1.28-.264-2.148-.564-2.911a5.892 5.892 0 0 0-1.387-2.123 5.857 5.857 0 0 0-2.128-1.38c-.764-.294-1.636-.496-2.914-.55C15.647.009 15.236-.006 11.977 0 8.718.008 8.31.021 7.03.084m.14 21.693c-1.17-.05-1.805-.245-2.228-.408a3.736 3.736 0 0 1-1.382-.895 3.695 3.695 0 0 1-.9-1.378c-.165-.423-.363-1.058-.417-2.228-.06-1.264-.072-1.644-.08-4.848-.006-3.204.006-3.583.061-4.848.05-1.169.246-1.805.408-2.228.216-.561.477-.96.895-1.382a3.705 3.705 0 0 1 1.379-.9c.423-.165 1.057-.361 2.227-.417 1.265-.06 1.644-.072 4.848-.08 3.203-.006 3.583.006 4.85.062 1.168.05 1.804.244 2.227.408.56.216.96.475 1.382.895.421.42.681.817.9 1.378.165.422.362 1.056.417 2.227.06 1.265.074 1.645.08 4.848.005 3.203-.006 3.583-.061 4.848-.051 1.17-.245 1.805-.408 2.23-.216.56-.477.96-.896 1.38a3.705 3.705 0 0 1-1.378.9c-.422.165-1.058.362-2.226.418-1.266.06-1.645.072-4.85.079-3.204.007-3.582-.006-4.848-.06m9.783-16.192a1.44 1.44 0 1 0 1.437-1.442 1.44 1.44 0 0 0-1.437 1.442M5.839 12.012a6.161 6.161 0 1 0 12.323-.024 6.162 6.162 0 0 0-12.323.024M8 12.008A4 4 0 1 1 12.008 16 4 4 0 0 1 8 12.008"/></svg>
                            Instagram
                            <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round" style="margin-left: 6px;"><path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"></path><polyline points="15 3 21 3 21 9"></polyline><line x1="10" y1="14" x2="21" y2="3"></line></svg>
                        </a>
                        <a href="mailto:luke.niccol@hotmail.com" class="footer-link">Email me</a>
                    </div>
                </div>

                <!-- Navigation -->
                <div class="footer-col">
                    <div class="footer-col-title">Navigation</div>
                    <div class="footer-links">
                        <a href="#about" class="footer-link">About me</a>
                        <a href="#work" class="footer-link">Work</a>
                        <a href="#tools" class="footer-link">Tools</a>
                    </div>
                </div>

                <!-- Case Studies -->
                <div class="footer-col">
                    <div class="footer-col-title">Case studies</div>
                    <div class="footer-links">
                        <a href="work/drovasignup/index.html" class="footer-link">Drova sign up</a>
                        <a href="work/foragecaster/index.html" class="footer-link">Foragecaster</a>
                        <a href="work/ggsa/index.html" class="footer-link">Good to Great Schools</a>
                        <a href="work/rpp/index.html" class="footer-link">Rural property platform</a>
                    </div>
                </div>
            </div>

            <div class="footer-bottom">
                <p>© 2026 Luke Niccol</p>
                <p>Sydney, Australia</p>
            </div>
        </div>
    </footer>

    <script>
        // Scroll to top on page load (ignore URL hash)
        if (window.location.hash) {
            history.replaceState(null, null, window.location.pathname);
            window.scrollTo(0, 0);
        }

        // Time Update
        function updateTime() {
            const now = new Date();
            const timeStr = now.toLocaleTimeString('en-US', { hour: '2-digit', minute: '2-digit', hour12: true });
            const dateStr = now.toLocaleDateString('en-GB', { day: '2-digit', month: 'long', year: 'numeric' }).toUpperCase();
            document.getElementById('current-time').textContent = `${timeStr} [SYD]`;
            document.getElementById('current-date').textContent = dateStr;
        }
        setInterval(updateTime, 1000);
        updateTime();

        // Theme Toggle with smooth fade transition
        function toggleTheme() {
            const root = document.documentElement;
            const currentTheme = root.getAttribute('data-theme');
            const newTheme = currentTheme === 'dark' ? 'light' : 'dark';
            
            // Create or get overlay
            let overlay = document.querySelector('.theme-transition-overlay');
            if (!overlay) {
                overlay = document.createElement('div');
                overlay.className = 'theme-transition-overlay';
                document.body.appendChild(overlay);
            }
            
            // Set overlay to current background color
            const currentBg = getComputedStyle(document.body).backgroundColor;
            overlay.style.background = currentBg;
            
            // Show overlay immediately
            requestAnimationFrame(() => {
                overlay.classList.add('active');
                
                // After overlay is visible, change theme
                setTimeout(() => {
                    root.setAttribute('data-theme', newTheme);
                    localStorage.setItem('theme', newTheme);
                    updateThemeIcon(newTheme);
                    
                    // Update overlay to new background color after theme change
                    requestAnimationFrame(() => {
                        const newBg = getComputedStyle(document.body).backgroundColor;
                        overlay.style.background = newBg;
                        
                        // Fade out overlay after theme has changed
                        setTimeout(() => {
                            overlay.classList.remove('active');
                        }, 200);
                    });
                }, 100);
            });
        }
        
        function updateThemeIcon(theme) {
            const btns = document.querySelectorAll('.theme-toggle');
            btns.forEach(btn => {
                btn.innerHTML = theme === 'dark' 
                    ? '<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z"/></svg>'
                    : '<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z"/></svg>';
            });
        }

        // Initialize Theme
        const savedTheme = localStorage.getItem('theme') || 'dark';
        document.documentElement.setAttribute('data-theme', savedTheme);
        updateThemeIcon(savedTheme);

        function toggleMobileMenu() {
            const menu = document.querySelector('.mobile-menu');
            const toggle = document.querySelector('.mobile-menu-toggle');
            const nav = document.querySelector('.nav-container');
            const body = document.body;
            
            const isActive = menu.classList.toggle('is-active');
            toggle.classList.toggle('is-active');
            body.classList.toggle('menu-open');
            
            if (isActive) {
                nav.style.background = 'var(--surface)';
                nav.style.backdropFilter = 'none';
                nav.style.webkitBackdropFilter = 'none';
                nav.style.pointerEvents = 'auto';
            } else {
                nav.style.background = '';
                nav.style.backdropFilter = '';
                nav.style.webkitBackdropFilter = '';
                nav.style.pointerEvents = '';
            }
        }

        // Work section is now a simple scroll layout - no complex animations needed

        // #region agent log - Image load tracking (disabled - old work section removed)
        const ggsaImg = null; // document.getElementById('ggsa-work-img');
        if (ggsaImg) {
            const checkImageDimensions = () => {
                const rect = ggsaImg.getBoundingClientRect();
                const computed = window.getComputedStyle(ggsaImg);
                fetch('http://127.0.0.1:7244/ingest/568e9b60-1662-431c-b8bf-eed0372d642a',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({location:'index.html:image-check',message:'GGSA image dimensions',data:{width:rect.width,height:rect.height,minHeight:computed.minHeight,complete:ggsaImg.complete,naturalWidth:ggsaImg.naturalWidth,naturalHeight:ggsaImg.naturalHeight,src:ggsaImg.src},timestamp:Date.now(),sessionId:'debug-session',runId:'run1',hypothesisId:'A'})}).catch(()=>{});
            };
            ggsaImg.addEventListener('load', () => {
                fetch('http://127.0.0.1:7244/ingest/568e9b60-1662-431c-b8bf-eed0372d642a',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({location:'index.html:image-load',message:'GGSA image loaded',data:{naturalWidth:ggsaImg.naturalWidth,naturalHeight:ggsaImg.naturalHeight,src:ggsaImg.src},timestamp:Date.now(),sessionId:'debug-session',runId:'run1',hypothesisId:'A'})}).catch(()=>{});
                setTimeout(checkImageDimensions, 100);
            });
            ggsaImg.addEventListener('error', () => {
                fetch('http://127.0.0.1:7244/ingest/568e9b60-1662-431c-b8bf-eed0372d642a',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({location:'index.html:image-error',message:'GGSA image ERROR failed to load',data:{src:ggsaImg.src},timestamp:Date.now(),sessionId:'debug-session',runId:'run1',hypothesisId:'A'})}).catch(()=>{});
            });
            if (ggsaImg.complete) {
                setTimeout(checkImageDimensions, 100);
            }
            // Check dimensions when item becomes visible
            const ggsaItem = document.querySelector('.work_item[data-index="2"]');
            if (ggsaItem) {
                const itemObserver = new MutationObserver(() => {
                    if (ggsaItem.classList.contains('is-visible')) {
                        setTimeout(checkImageDimensions, 100);
                    }
                });
                itemObserver.observe(ggsaItem, { attributes: true, attributeFilter: ['class'] });
            }
        }
        // Check all work images
        document.querySelectorAll('.work_visual_main img').forEach((img, idx) => {
            img.addEventListener('load', () => {
                fetch('http://127.0.0.1:7244/ingest/568e9b60-1662-431c-b8bf-eed0372d642a',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({location:'index.html:all-images',message:'Work image loaded',data:{index:idx,src:img.src,complete:img.complete,naturalWidth:img.naturalWidth,naturalHeight:img.naturalHeight},timestamp:Date.now(),sessionId:'debug-session',runId:'run1',hypothesisId:'D'})}).catch(()=>{});
            });
            img.addEventListener('error', () => {
                fetch('http://127.0.0.1:7244/ingest/568e9b60-1662-431c-b8bf-eed0372d642a',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({location:'index.html:all-images',message:'Work image ERROR',data:{index:idx,src:img.src},timestamp:Date.now(),sessionId:'debug-session',runId:'run1',hypothesisId:'A'})}).catch(()=>{});
            });
        });
        // #endregion

        // Nav Active State Observer - Improved for real-time updates
        const sections = document.querySelectorAll('section[id]');
        const navLinks = document.querySelectorAll('.nav-link');
        
        function updateActiveNav() {
            // Priority trigger: check what's near the top of the viewport
            const triggerPoint = window.scrollY + 150; 
            
            let currentSection = '';
            
            // 1. Direct hit check
            sections.forEach(section => {
                const rect = section.getBoundingClientRect();
                const sectionTop = rect.top + window.scrollY;
                const sectionBottom = sectionTop + rect.height;
                const id = section.getAttribute('id');
                
                if (triggerPoint >= sectionTop - 20 && triggerPoint < sectionBottom) {
                    currentSection = id;
                }
            });
            
            // 2. Max visibility check (fallback)
            if (!currentSection) {
                let maxVisibleHeight = 0;
                sections.forEach(section => {
                    const rect = section.getBoundingClientRect();
                    const visibleHeight = Math.min(rect.bottom, window.innerHeight) - Math.max(rect.top, 0);
                    if (visibleHeight > maxVisibleHeight) {
                        maxVisibleHeight = visibleHeight;
                        currentSection = section.getAttribute('id');
                    }
                });
            }
            
            // Update nav links
            if (currentSection) {
                navLinks.forEach(link => {
                    const href = link.getAttribute('href');
                    if (href === `#${currentSection}`) {
                        link.classList.add('active');
                    } else {
                        link.classList.remove('active');
                    }
                });
                
                // If we're in a section without a nav link (like 'instagram'), 
                // keep 'Library' active as it's the closest preceding link.
                if (currentSection === 'instagram') {
                    const libraryLink = document.querySelector('a[href="#library"]');
                    if (libraryLink) libraryLink.classList.add('active');
                }
            }
        }
        
        // Use IntersectionObserver for better performance
        const sectionObserver = new IntersectionObserver((entries) => {
            updateActiveNav();
        }, { 
            threshold: [0, 0.1, 0.2, 0.5],
            rootMargin: '-10% 0px -10% 0px'
        });

        sections.forEach(section => sectionObserver.observe(section));
        
        // Also update on scroll for real-time feedback
        let scrollTimeout;
        window.addEventListener('scroll', () => {
            clearTimeout(scrollTimeout);
            scrollTimeout = setTimeout(updateActiveNav, 10);
        }, { passive: true });
        
        // Initial update
        updateActiveNav();

        // ===== HEXAGON BACKGROUND ANIMATION (GSAP) =====
        gsap.registerPlugin(MotionPathPlugin);

        function initHexagonAnimation() {
            const svg = document.getElementById('hexSvg');
            if (!svg) return;

            const hexSize = 40; 
            const hexWidth = Math.sqrt(3) * hexSize;
            const hexHeight = 2 * hexSize;
            
            // To create branching, we need a grid of vertices
            // A vertex can be connected to 3 edges
            const vertices = new Map();

            function getVertexKey(x, y) {
                return `${Math.round(x * 100) / 100},${Math.round(y * 100) / 100}`;
            }

            // Build vertex map for the viewport
            for (let r = -1; r <= Math.ceil(window.innerHeight / (hexHeight * 0.75)) + 1; r++) {
                for (let c = -1; c <= Math.ceil(window.innerWidth / hexWidth) + 1; c++) {
                    const cx = c * hexWidth + (r % 2 ? hexWidth / 2 : 0);
                    const cy = r * hexHeight * 0.75;
                    
                    // 6 vertices per hex
                    for (let i = 0; i < 6; i++) {
                        const angle_deg = 60 * i - 30;
                        const angle_rad = Math.PI / 180 * angle_deg;
                        const vx = cx + hexSize * Math.cos(angle_rad);
                        const vy = cy + hexSize * Math.sin(angle_rad);
                        const key = getVertexKey(vx, vy);
                        
                        if (!vertices.has(key)) {
                            vertices.set(key, { x: vx, y: vy, neighbors: new Set() });
                        }
                    }
                }
            }

            // Connect neighbors (distance based)
            const keys = Array.from(vertices.keys());
            for (let i = 0; i < keys.length; i++) {
                const v1 = vertices.get(keys[i]);
                for (let j = i + 1; j < keys.length; j++) {
                    const v2 = vertices.get(keys[j]);
                    const dist = Math.sqrt((v1.x - v2.x)**2 + (v1.y - v2.y)**2);
                    if (Math.abs(dist - hexSize) < 2) {
                        v1.neighbors.add(keys[j]);
                        v2.neighbors.add(keys[i]);
                    }
                }
            }

            function createMultiEdgeLine() {
                const startKey = keys[Math.floor(Math.random() * keys.length)];
                const edgeCount = 3 + Math.floor(Math.random() * 6); // 3 to 8 edges
                let currentKey = startKey;
                let explored = new Set([currentKey]);
                let pathPoints = [vertices.get(currentKey)];
                
                // Build the path sequence first
                for (let i = 0; i < edgeCount; i++) {
                    const vertex = vertices.get(currentKey);
                    const neighbors = Array.from(vertex.neighbors).filter(n => !explored.has(n));
                    if (neighbors.length === 0) break;
                    
                    const nextKey = neighbors[Math.floor(Math.random() * neighbors.length)];
                    explored.add(nextKey);
                    pathPoints.push(vertices.get(nextKey));
                    currentKey = nextKey;
                }

                if (pathPoints.length < 2) return;

                // Create a single path for the entire multi-edge movement
                const pathElement = document.createElementNS("http://www.w3.org/2000/svg", "path");
                pathElement.setAttribute("class", "glow-line");
                
                let d = `M${pathPoints[0].x},${pathPoints[0].y}`;
                for (let i = 1; i < pathPoints.length; i++) {
                    d += ` L${pathPoints[i].x},${pathPoints[i].y}`;
                }
                pathElement.setAttribute("d", d);
                svg.appendChild(pathElement);

                const totalLength = pathElement.getTotalLength();
                gsap.set(pathElement, { strokeDasharray: totalLength, strokeDashoffset: totalLength });

                // Animate the whole path once with in-out easing
                gsap.to(pathElement, {
                    strokeDashoffset: 0,
                    opacity: 0.9,
                    duration: pathPoints.length * 0.25, // Slower, more elegant travel
                    ease: "power2.inOut",
                    onComplete: () => {
                        gsap.to(pathElement, {
                            opacity: 0,
                            duration: 1.5,
                            delay: 0.8,
                            onComplete: () => pathElement.remove()
                        });
                    }
                });
            }

            // Periodically spawn new multi-edge lines
            setInterval(createMultiEdgeLine, 1200); // Less frequent spawning to reduce chaos
            for(let i=0; i<6; i++) setTimeout(createMultiEdgeLine, i * 400);
        }


        // ===== GRADUAL BLUR EFFECT (Viewport Edges) =====
        function initGradualBlur() {
            function createBlur(position, height, strength = 2) {
                const container = document.createElement('div');
                container.className = `gradual-blur gradual-blur-${position}`;
                container.style.height = height;

                const inner = document.createElement('div');
                inner.className = 'gradual-blur-inner';
                container.appendChild(inner);

                const divCount = 8;
                const increment = 100 / divCount;
                const direction = position === 'top' ? 'to top' : 'to bottom';
                
                // Bezier curve function for smooth transition
                const curveFunc = p => p * p * (3 - 2 * p);

                for (let i = 1; i <= divCount; i++) {
                    let progress = i / divCount;
                    progress = curveFunc(progress);

                    // Exponential blur calculation
                    const blurValue = Math.pow(2, progress * 4) * 0.0625 * strength;

                    const p1 = Math.round((increment * i - increment) * 10) / 10;
                    const p2 = Math.round(increment * i * 10) / 10;
                    const p3 = Math.round((increment * i + increment) * 10) / 10;
                    const p4 = Math.round((increment * i + increment * 2) * 10) / 10;

                    let gradient = `transparent ${p1}%, black ${p2}%`;
                    if (p3 <= 100) gradient += `, black ${p3}%`;
                    if (p4 <= 100) gradient += `, transparent ${p4}%`;

                    const div = document.createElement('div');
                    div.style.position = 'absolute';
                    div.style.inset = '0';
                    const mask = `linear-gradient(${direction}, ${gradient})`;
                    div.style.maskImage = mask;
                    div.style.webkitMaskImage = mask;
                    div.style.backdropFilter = `blur(${blurValue.toFixed(3)}rem)`;
                    div.style.webkitBackdropFilter = `blur(${blurValue.toFixed(3)}rem)`;
                    inner.appendChild(div);
                }
                document.body.appendChild(container);
            }

            // Apply to top and bottom of the viewport
            createBlur('top', '10rem', 2.5);
            createBlur('bottom', '6rem', 1.5); // Reduced height and strength for bottom to not cover footer
        }

        // Cleanup any existing shape-blur containers
        function removeShapeBlurContainers() {
            const containers = document.querySelectorAll('.shape-blur-container');
            containers.forEach(container => container.remove());
        }

        // Run when DOM is ready
        if (document.readyState === 'loading') {
            document.addEventListener('DOMContentLoaded', () => {
                removeShapeBlurContainers();
                initHexagonAnimation();
                initGradualBlur();
            });
        } else {
            removeShapeBlurContainers();
            initHexagonAnimation();
            initGradualBlur();
        }
        
        // Also remove any that might be created dynamically
        const observer = new MutationObserver(() => {
            const containers = document.querySelectorAll('.shape-blur-container');
            if (containers.length > 0) {
                containers.forEach(container => container.remove());
            }
        });
        
        observer.observe(document.body, {
            childList: true,
            subtree: true
        });

        // ===== REVEAL ANIMATIONS (GSAP) =====
        gsap.registerPlugin(ScrollTrigger);

        // Remove hero-loading class immediately to show content
        document.documentElement.classList.remove('hero-loading');

        function initRevealAnimations() {
            // 1. Reading Room & Other Sections - Cascading scroll
            gsap.from('.reading-room-card', {
                y: 50,
                opacity: 0,
                duration: 1,
                ease: "power2.out",
                scrollTrigger: {
                    trigger: '#library',
                    start: "top 75%",
                    toggleActions: "play none none reverse"
                }
            });

            gsap.from('.instagram-description', {
                y: 40,
                opacity: 0,
                duration: 0.8,
                ease: "power2.out",
                scrollTrigger: {
                    trigger: '#instagram',
                    start: "top 80%",
                    toggleActions: "play none none reverse"
                }
            });

            // 2. Instagram posts grid – simple fade in
            const instagramFullbleed = document.querySelector('.instagram-fullbleed');
            if (instagramFullbleed) {
                gsap.from(instagramFullbleed, 
                    { 
                        y: 30, 
                        opacity: 0.9,
                        duration: 0.8, 
                        ease: "power2.out",
                        scrollTrigger: {
                            trigger: "#instagram",
                            start: "top 85%",
                            toggleActions: "play none none reverse"
                        }
                    }
                );
            }

            // 3. Tools Section - Cascading scroll animation
            // Ensure tools container is visible first
            gsap.set('.tools-network-container', { opacity: 1, y: 0 });
            
            const toolsTl = gsap.timeline({
                scrollTrigger: {
                    trigger: '#tools',
                    start: "top 80%",
                    toggleActions: "play none none reverse"
                }
            });
            
            toolsTl
                .from('#tools .section-header', { y: 30, opacity: 0, duration: 0.6 })
                .from('.tools-title', { y: 30, opacity: 0, duration: 0.7 }, "-=0.4")
                .from('.tools-subtitle', { y: 20, opacity: 0, duration: 0.5 }, "-=0.5")
                .from('.tools-network-container', { y: 30, opacity: 0.9, duration: 0.8, ease: "power2.out" }, "-=0.3");

            // 4. Work Section - Cascading scroll animation
            // Ensure work cards are visible first
            gsap.set('.work-card', { opacity: 1, y: 0 });
            
            const workTl = gsap.timeline({
                scrollTrigger: {
                    trigger: '.work-section-clean',
                    start: "top 80%",
                    toggleActions: "play none none reverse"
                }
            });
            
            workTl
                .from('.work-section-clean .section-header', { y: 30, opacity: 0, duration: 0.6 })
                .from('.work-section-title', { y: 30, opacity: 0, duration: 0.7 }, "-=0.4")
                .from('.work-section-subtitle', { y: 20, opacity: 0, duration: 0.5 }, "-=0.5")
                .from('.work-card', { 
                    y: 40, 
                    opacity: 0.8, 
                    duration: 0.7, 
                    stagger: 0.12,
                    ease: "power2.out"
                }, "-=0.3");

            // Footer: no scroll animation – footer-cols are shown by default so nav/links always appear (ScrollTrigger at page bottom was unreliable)

            // 5. Scrolling background text speed based on scroll (keeping for other sections if needed)
            const workScrollText = document.querySelector('.work-scroll-text');
            if (workScrollText) {
                gsap.to(workScrollText, {
                    x: '-=200',
                    ease: 'none',
                    scrollTrigger: {
                        trigger: '#work',
                        start: 'top bottom',
                        end: 'bottom top',
                        scrub: 0.5
                    }
                });
            }

            // Recalc ScrollTrigger after dynamic content (e.g. Behold widget) changes layout
            setTimeout(function() { ScrollTrigger.refresh(); }, 500);
            setTimeout(function() { ScrollTrigger.refresh(); }, 2500);
        }

        // ===== CASCADING PAGE LOAD ANIMATION (Awwwards Style) =====
        function initCascadingLoad() {
            if (typeof gsap === 'undefined') return;
            if (window.matchMedia('(prefers-reduced-motion: reduce)').matches) return;

            const tl = gsap.timeline({ defaults: { ease: "power2.out" } });

            // Set initial states - keep elements barely visible to prevent flash
            gsap.set('.nav-container', { opacity: 0.95, y: -10 });
            gsap.set('.hero-title', { opacity: 0.95, y: 20 });
            gsap.set('.hero-subtitle', { opacity: 0.95, y: 15 });
            gsap.set('.hero-cta', { opacity: 0.95, y: 10 });
            gsap.set('.theme-toggle', { opacity: 0.95, scale: 0.98 });
            gsap.set('.hero-gallery', { opacity: 0.95, y: 10 });

            // Cascading entrance - subtle and smooth
            tl
                // Nav slides down
                .to('.nav-container', { opacity: 1, y: 0, duration: 0.6 }, 0.1)
                // Theme toggle
                .to('.theme-toggle', { opacity: 1, scale: 1, duration: 0.5 }, 0.2)
                // Portrait
                .to('.hero-gallery', { opacity: 1, y: 0, duration: 0.7 }, 0.15)
                // Hero title
                .to('.hero-title', { opacity: 1, y: 0, duration: 0.7 }, 0.2)
                // Subtitle
                .to('.hero-subtitle', { opacity: 1, y: 0, duration: 0.6 }, 0.35)
                // CTA buttons
                .to('.hero-cta', { opacity: 1, y: 0, duration: 0.5 }, 0.5);
        }

        // Run immediately when DOM is ready
        if (document.readyState === 'loading') {
            document.addEventListener('DOMContentLoaded', initCascadingLoad);
        } else {
            initCascadingLoad();
        }

        // Initialize scroll-triggered reveal animations
        if (document.readyState === 'complete') {
            setTimeout(initRevealAnimations, 100);
        } else {
            window.addEventListener('load', function() {
                setTimeout(initRevealAnimations, 100);
            });
        }

        // ===== OLD SCROLL ANIMATION OBSERVER (Disabled in favor of GSAP) =====
        /*
        function initScrollAnimations() {
            // ...
        }
        */

        // ===== HERO GALLERY - Full image reveal on hover (desktop) / Carousel (mobile) =====
        (function() {
            const heroGallery = document.getElementById('heroGallery');
            const revealLayer = document.getElementById('heroGalleryReveal');
            if (!heroGallery) return;

            const items = heroGallery.querySelectorAll('.hero-gallery-item');
            const isMobile = window.innerWidth <= 768;

            if (isMobile) {
                // Mobile carousel
                let currentIndex = 0;
                
                // Set first item as active
                items[0].classList.add('active');
                
                // Auto-rotate every 2 seconds
                setInterval(() => {
                    items[currentIndex].classList.remove('active');
                    currentIndex = (currentIndex + 1) % items.length;
                    items[currentIndex].classList.add('active');
                }, 2000);
            } else if (revealLayer) {
                // Desktop hover reveal
                items.forEach(item => {
                    item.addEventListener('mouseenter', function() {
                        const src = this.getAttribute('data-src');
                        if (src) {
                            revealLayer.style.backgroundImage = `url('${src}')`;
                            revealLayer.classList.add('active');
                        }
                    });

                    item.addEventListener('mouseleave', function() {
                        revealLayer.classList.remove('active');
                    });
                });
            }
        })();

        // ===== TOOLS NETWORK GRAPH =====
        (function() {
            console.log('Tools network graph initializing...');
            const container = document.querySelector('.tools-network-container');
            const svg = document.getElementById('toolsNetwork');
            const tooltip = document.querySelector('.network-tooltip');
            
            if (!svg || !container) {
                console.error('Tools network: Missing SVG or container', { svg: !!svg, container: !!container });
                return;
            }
            
            console.log('Tools network: Container and SVG found');
            
            // Tool data with BIGGER sizes based on usage
            const isMobile = window.innerWidth <= 768;
            const sizeMultiplier = isMobile ? 0.75 : 1.3; // Bigger on desktop, still good size on mobile
            
            const nodes = [
                // Featured - Biggest nodes (most used)
                { id: 'figma', name: 'Figma', category: 'featured', size: 140 * sizeMultiplier, color: '#A259FF', icon: 'New%20icons/Figma-logo.svg', desc: 'Primary design tool - interfaces, prototypes, design systems' },
                { id: 'chatgpt', name: 'ChatGPT', category: 'featured', size: 130 * sizeMultiplier, color: '#10A37F', icon: 'New%20icons/openai.svg', desc: 'AI partner for ideation, writing & problem-solving' },
                { id: 'cursor', name: 'Cursor', category: 'featured', size: 125 * sizeMultiplier, color: '#1a1a1a', icon: 'cursor-ai.png', desc: 'AI-first code editor for building products' },
                
                // Secondary - Medium nodes
                { id: 'claude', name: 'Claude', category: 'ai', size: 100 * sizeMultiplier, color: '#D4A276', icon: 'New%20icons/claud%20crab.svg', desc: 'Complex architecture & bringing ideas together' },
                { id: 'kimi', name: 'Kimi', category: 'ai', size: 95 * sizeMultiplier, color: '#6366F1', icon: 'New%20icons/kimi%20code.svg', desc: 'Long-context coding & debugging' },
                { id: 'lovable', name: 'Lovable', category: 'design', size: 90 * sizeMultiplier, color: '#FF6B6B', icon: 'New%20icons/Lovable_Logo_2025_icon-s1280.png', desc: 'Rapid prototyping for stakeholder reviews' },
                { id: 'v0', name: 'v0', category: 'design', size: 85 * sizeMultiplier, color: '#A259FF', icon: './framerusercontent.com/images/61rpPdHqfL9PIdlF6WUsRNg40o269b.png', desc: 'AI UI generation from prompts' },
                
                // Creative Suite - Smaller nodes
                { id: 'illustrator', name: 'Illustrator', category: 'creative', size: 75 * sizeMultiplier, color: '#FF9A00', icon: 'New%20icons/Adobe_Illustrator_CC_icon.svg.png', desc: 'Vector graphics & illustrations' },
                { id: 'photoshop', name: 'Photoshop', category: 'creative', size: 75 * sizeMultiplier, color: '#31A8FF', icon: 'New%20icons/Adobe_Photoshop_CC_icon.svg.png', desc: 'Image editing & compositing' },
                
                // Additional tools
                { id: 'notion', name: 'Notion', category: 'ai', size: 78 * sizeMultiplier, color: '#000000', icon: 'notion-logo-no-background.png', desc: 'Documentation & project management' }
            ];
            
            // Connections between tools
            const links = [
                // Figma connects to design-related tools
                { source: 'figma', target: 'lovable' },
                { source: 'figma', target: 'v0' },
                { source: 'figma', target: 'illustrator' },
                { source: 'figma', target: 'photoshop' },
                
                // Cursor connects to dev tools
                { source: 'cursor', target: 'chatgpt' },
                { source: 'cursor', target: 'claude' },
                { source: 'cursor', target: 'kimi' },
                { source: 'cursor', target: 'v0' },
                { source: 'cursor', target: 'lovable' },
                
                // ChatGPT connects to AI tools
                { source: 'chatgpt', target: 'claude' },
                { source: 'chatgpt', target: 'kimi' },
                { source: 'chatgpt', target: 'notion' },
                
                // AI tools connect to each other
                { source: 'claude', target: 'kimi' },
                { source: 'claude', target: 'notion' },
                
                // Creative suite connections
                { source: 'illustrator', target: 'photoshop' },
                { source: 'illustrator', target: 'figma' },
                { source: 'photoshop', target: 'figma' },
                
                // Prototyping connections
                { source: 'lovable', target: 'v0' },
                { source: 'lovable', target: 'chatgpt' }
            ];
            
            // Get container dimensions
            let width = container.clientWidth || 1400;
            let height = container.clientHeight || 650;
            
            // Ensure minimum dimensions
            if (width === 0) width = 1400;
            if (height === 0) height = 650;
            
            console.log('Tools network: Dimensions', width, height);
            
            // Create SVG with explicit dimensions
            svg.setAttribute('width', width);
            svg.setAttribute('height', height);
            svg.setAttribute('viewBox', `0 0 ${width} ${height}`);
            svg.style.width = '100%';
            svg.style.height = '100%';
            
            // Add defs for realistic glass sphere filters
            const defs = d3.select(svg).append('defs');
            
            // 1. Main Glass Sphere Filter with Chromatic Aberration
            const glassSphere = defs.append('filter')
                .attr('id', 'glass-sphere')
                .attr('x', '-50%')
                .attr('y', '-50%')
                .attr('width', '200%')
                .attr('height', '200%');
            
            // Create inner shadow/depth
            glassSphere.append('feGaussianBlur')
                .attr('in', 'SourceAlpha')
                .attr('stdDeviation', '4')
                .attr('result', 'blur');
            
            // Specular lighting for 3D glass effect
            const specular = glassSphere.append('feSpecularLighting')
                .attr('in', 'blur')
                .attr('surfaceScale', '8')
                .attr('specularConstant', '1.5')
                .attr('specularExponent', '35')
                .attr('lighting-color', '#ffffff')
                .attr('result', 'specular');
            
            specular.append('fePointLight')
                .attr('x', '-200')
                .attr('y', '-300')
                .attr('z', '400');
            
            // Inner glow/reflection
            glassSphere.append('feComposite')
                .attr('in', 'specular')
                .attr('in2', 'SourceAlpha')
                .attr('operator', 'in')
                .attr('result', 'specular');
            
            // Chromatic Aberration - split RGB channels
            // Red channel - offset left
            glassSphere.append('feOffset')
                .attr('in', 'SourceGraphic')
                .attr('dx', '-3')
                .attr('dy', '-1')
                .attr('result', 'red-offset');
            
            glassSphere.append('feColorMatrix')
                .attr('in', 'red-offset')
                .attr('type', 'matrix')
                .attr('values', '1 0 0 0 0  0 0 0 0 0  0 0 0 0 0  0 0 0 1 0')
                .attr('result', 'red-channel');
            
            // Green channel - slight offset
            glassSphere.append('feOffset')
                .attr('in', 'SourceGraphic')
                .attr('dx', '0')
                .attr('dy', '0')
                .attr('result', 'green-offset');
            
            glassSphere.append('feColorMatrix')
                .attr('in', 'green-offset')
                .attr('type', 'matrix')
                .attr('values', '0 0 0 0 0  0 1 0 0 0  0 0 0 0 0  0 0 0 1 0')
                .attr('result', 'green-channel');
            
            // Blue channel - offset right
            glassSphere.append('feOffset')
                .attr('in', 'SourceGraphic')
                .attr('dx', '3')
                .attr('dy', '1')
                .attr('result', 'blue-offset');
            
            glassSphere.append('feColorMatrix')
                .attr('in', 'blue-offset')
                .attr('type', 'matrix')
                .attr('values', '0 0 0 0 0  0 0 0 0 0  0 0 1 0 0  0 0 0 1 0')
                .attr('result', 'blue-channel');
            
            // Merge chromatic channels
            glassSphere.append('feBlend')
                .attr('in', 'red-channel')
                .attr('in2', 'green-channel')
                .attr('mode', 'screen')
                .attr('result', 'rg-blend');
            
            glassSphere.append('feBlend')
                .attr('in', 'rg-blend')
                .attr('in2', 'blue-channel')
                .attr('mode', 'screen')
                .attr('result', 'chromatic-result');
            
            // Drop shadow
            const shadow = glassSphere.append('feDropShadow')
                .attr('dx', '0')
                .attr('dy', '8')
                .attr('stdDeviation', '12')
                .attr('flood-color', 'rgba(0,0,0,0.2)');
            
            // 2. Hover Glass Sphere Filter with enhanced Chromatic Aberration
            const glassSphereHover = defs.append('filter')
                .attr('id', 'glass-sphere-hover')
                .attr('x', '-50%')
                .attr('y', '-50%')
                .attr('width', '200%')
                .attr('height', '200%');
            
            glassSphereHover.append('feGaussianBlur')
                .attr('in', 'SourceAlpha')
                .attr('stdDeviation', '3')
                .attr('result', 'blur');
            
            const specularHover = glassSphereHover.append('feSpecularLighting')
                .attr('in', 'blur')
                .attr('surfaceScale', '10')
                .attr('specularConstant', '2')
                .attr('specularExponent', '40')
                .attr('lighting-color', '#ffffff')
                .attr('result', 'specular');
            
            specularHover.append('fePointLight')
                .attr('x', '-200')
                .attr('y', '-300')
                .attr('z', '400');
            
            glassSphereHover.append('feComposite')
                .attr('in', 'specular')
                .attr('in2', 'SourceAlpha')
                .attr('operator', 'in')
                .attr('result', 'specular');
            
            // Enhanced Chromatic Aberration on hover - more pronounced
            glassSphereHover.append('feOffset')
                .attr('in', 'SourceGraphic')
                .attr('dx', '-5')
                .attr('dy', '-2')
                .attr('result', 'red-offset-hover');
            
            glassSphereHover.append('feColorMatrix')
                .attr('in', 'red-offset-hover')
                .attr('type', 'matrix')
                .attr('values', '1 0 0 0 0  0 0 0 0 0  0 0 0 0 0  0 0 0 1 0')
                .attr('result', 'red-channel-hover');
            
            glassSphereHover.append('feOffset')
                .attr('in', 'SourceGraphic')
                .attr('dx', '0')
                .attr('dy', '0')
                .attr('result', 'green-offset-hover');
            
            glassSphereHover.append('feColorMatrix')
                .attr('in', 'green-offset-hover')
                .attr('type', 'matrix')
                .attr('values', '0 0 0 0 0  0 1 0 0 0  0 0 0 0 0  0 0 0 1 0')
                .attr('result', 'green-channel-hover');
            
            glassSphereHover.append('feOffset')
                .attr('in', 'SourceGraphic')
                .attr('dx', '5')
                .attr('dy', '2')
                .attr('result', 'blue-offset-hover');
            
            glassSphereHover.append('feColorMatrix')
                .attr('in', 'blue-offset-hover')
                .attr('type', 'matrix')
                .attr('values', '0 0 0 0 0  0 0 0 0 0  0 0 1 0 0  0 0 0 1 0')
                .attr('result', 'blue-channel-hover');
            
            glassSphereHover.append('feBlend')
                .attr('in', 'red-channel-hover')
                .attr('in2', 'green-channel-hover')
                .attr('mode', 'screen')
                .attr('result', 'rg-blend-hover');
            
            glassSphereHover.append('feBlend')
                .attr('in', 'rg-blend-hover')
                .attr('in2', 'blue-channel-hover')
                .attr('mode', 'screen')
                .attr('result', 'chromatic-result-hover');
            
            // Stronger glow on hover
            glassSphereHover.append('feDropShadow')
                .attr('dx', '0')
                .attr('dy', '12')
                .attr('stdDeviation', '20')
                .attr('flood-color', 'rgba(0,0,0,0.3)');
            
            // 3. Gradient for 3D sphere effect
            const sphereGradient = defs.append('radialGradient')
                .attr('id', 'sphere-shine')
                .attr('cx', '25%')
                .attr('cy', '25%')
                .attr('r', '60%');
            
            sphereGradient.append('stop')
                .attr('offset', '0%')
                .attr('stop-color', 'rgba(255,255,255,0.9)');
            
            sphereGradient.append('stop')
                .attr('offset', '30%')
                .attr('stop-color', 'rgba(255,255,255,0.3)');
            
            sphereGradient.append('stop')
                .attr('offset', '70%')
                .attr('stop-color', 'rgba(255,255,255,0.05)');
            
            sphereGradient.append('stop')
                .attr('offset', '100%')
                .attr('stop-color', 'rgba(255,255,255,0)');
            
            // Create bouncy physics simulation with collision detection
            const simulation = d3.forceSimulation(nodes)
                .force('link', d3.forceLink(links).id(d => d.id).distance(d => {
                    const sourceNode = nodes.find(n => n.id === (d.source.id || d.source));
                    const targetNode = nodes.find(n => n.id === (d.target.id || d.target));
                    const avgSize = (sourceNode.size + targetNode.size) / 2;
                    return avgSize * 2.5;
                }).strength(0.2))
                // Strong repulsion to prevent overlap
                .force('charge', d3.forceManyBody().strength(d => -d.size * 5).distanceMax(500))
                // Center attraction (weak)
                .force('center', d3.forceCenter(width / 2, height / 2).strength(0.02))
                // Strong collision with bounce physics
                .force('collision', d3.forceCollide().radius(d => d.size + 8).strength(0.8).iterations(3))
                // Boundary containment forces (bouncy walls)
                .force('boundaryX', d3.forceX(width / 2).strength(d => {
                    const padding = d.size + 20;
                    if (d.x < padding) return 0.3;
                    if (d.x > width - padding) return 0.3;
                    return 0;
                }))
                .force('boundaryY', d3.forceY(height / 2).strength(d => {
                    const padding = d.size + 20;
                    if (d.y < padding) return 0.3;
                    if (d.y > height - padding) return 0.3;
                    return 0;
                }))
                // Lower velocity decay for more bounce
                .velocityDecay(0.94)
                .alphaDecay(0.01)
                .alphaMin(0.001);

            // Custom elastic collision force for bouncy physics
            function elasticCollide() {
                let nodes = [];
                const elasticity = 0.7; // Bounce factor (0-1)
                
                function force(alpha) {
                    for (let i = 0; i < nodes.length; i++) {
                        for (let j = i + 1; j < nodes.length; j++) {
                            const a = nodes[i];
                            const b = nodes[j];
                            
                            const dx = b.x - a.x;
                            const dy = b.y - a.y;
                            const distance = Math.sqrt(dx * dx + dy * dy);
                            const minDistance = a.size + b.size + 4; // Small padding
                            
                            if (distance < minDistance && distance > 0) {
                                // Calculate collision normal
                                const nx = dx / distance;
                                const ny = dy / distance;
                                
                                // Relative velocity
                                const dvx = b.vx - a.vx;
                                const dvy = b.vy - a.vy;
                                
                                // Velocity along normal
                                const velAlongNormal = dvx * nx + dvy * ny;
                                
                                // Only resolve if moving toward each other
                                if (velAlongNormal < 0) {
                                    // Push apart
                                    const overlap = minDistance - distance;
                                    const separationFactor = 0.5;
                                    
                                    a.x -= nx * overlap * separationFactor;
                                    a.y -= ny * overlap * separationFactor;
                                    b.x += nx * overlap * separationFactor;
                                    b.y += ny * overlap * separationFactor;
                                    
                                    // Bounce velocities
                                    const massA = a.size * a.size; // Mass proportional to area
                                    const massB = b.size * b.size;
                                    const totalMass = massA + massB;
                                    
                                    // Impulse
                                    const impulse = 2 * velAlongNormal / totalMass * elasticity;
                                    
                                    a.vx += impulse * massB * nx * 0.5;
                                    a.vy += impulse * massB * ny * 0.5;
                                    b.vx -= impulse * massA * nx * 0.5;
                                    b.vy -= impulse * massA * ny * 0.5;
                                }
                            }
                        }
                    }
                }
                
                force.initialize = function(_) { nodes = _; };
                return force;
            }

            // Add elastic collision force
            simulation.force('elastic', elasticCollide());
            
            // Create links
            const link = d3.select(svg)
                .append('g')
                .attr('class', 'links')
                .selectAll('line')
                .data(links)
                .enter()
                .append('line')
                .attr('class', 'network-link');
            
            // Create node groups
            const node = d3.select(svg)
                .append('g')
                .attr('class', 'nodes')
                .selectAll('g')
                .data(nodes)
                .enter()
                .append('g')
                .attr('class', d => `network-node ${d.category}`)
                .call(d3.drag()
                    .on('start', dragstarted)
                    .on('drag', dragged)
                    .on('end', dragended));
            
            // Add main glass sphere
            node.append('circle')
                .attr('r', d => d.size)
                .attr('fill', d => d.color)
                .attr('stroke', d => d.category === 'featured' ? 'rgba(255,255,255,0.9)' : 'rgba(255,255,255,0.7)')
                .attr('stroke-width', d => d.category === 'featured' ? 3 : 2.5)
                .style('fill-opacity', d => d.category === 'featured' ? 0.18 : 0.15)
                .style('filter', 'url(#glass-sphere)')
                .attr('class', 'main-sphere');
            
            // Add 3D highlight overlay
            node.append('circle')
                .attr('r', d => d.size * 0.9)
                .attr('fill', 'url(#sphere-shine)')
                .style('pointer-events', 'none');
            
            // Add subtle rim light
            node.append('circle')
                .attr('r', d => d.size)
                .attr('fill', 'none')
                .attr('stroke', 'rgba(255,255,255,0.3)')
                .attr('stroke-width', 1)
                .style('pointer-events', 'none');
            node.append('circle')
                .attr('r', d => d.size * 0.85)
                .attr('fill', 'url(#glass-shine)')
                .attr('opacity', 0.3)
                .style('pointer-events', 'none');
            
            // Add icons to nodes
            node.append('image')
                .attr('class', 'network-node-icon')
                .attr('xlink:href', d => d.icon)
                .attr('x', d => -d.size * 0.5)
                .attr('y', d => -d.size * 0.5)
                .attr('width', d => d.size)
                .attr('height', d => d.size)
                .attr('preserveAspectRatio', 'xMidYMid meet')
                .style('pointer-events', 'none');
            
            // Add labels in a separate group (no chromatic aberration)
            const labelGroup = d3.select(svg)
                .append('g')
                .attr('class', 'node-labels')
                .selectAll('g')
                .data(nodes)
                .enter()
                .append('g')
                .attr('class', 'node-label-group');
            
            labelGroup.append('text')
                .attr('class', 'node-label')
                .attr('y', d => d.y + d.size + 18)
                .attr('x', d => d.x)
                .text(d => d.name);
            
            labelGroup.append('text')
                .attr('class', 'node-label-desc')
                .attr('y', d => d.y + d.size + 34)
                .attr('x', d => d.x)
                .text(d => d.desc.length > 25 ? d.desc.substring(0, 25) + '...' : d.desc);
            
            // Tooltip interactions with highlight/dim effect
            node.on('mouseenter', function(event, d) {
                // Add hover class to container
                container.classList.add('has-hover');
                
                // Add active class to this node
                d3.select(this).classed('active', true);
                
                // Highlight connected links
                link.classed('active', l => l.source.id === d.id || l.target.id === d.id);
                
                // Show enhanced tooltip with process info
                tooltip.innerHTML = `
                    <div class="network-tooltip-title" style="color: ${d.color};">${d.name}</div>
                    <div class="network-tooltip-desc">${d.desc}</div>
                `;
                tooltip.classList.add('visible');
                
                const rect = container.getBoundingClientRect();
                const tooltipX = event.clientX - rect.left + 20;
                const tooltipY = event.clientY - rect.top - 20;
                
                tooltip.style.left = tooltipX + 'px';
                tooltip.style.top = tooltipY + 'px';
            })
            .on('mousemove', function(event) {
                const rect = container.getBoundingClientRect();
                tooltip.style.left = (event.clientX - rect.left + 20) + 'px';
                tooltip.style.top = (event.clientY - rect.top - 20) + 'px';
            })
            .on('mouseleave', function() {
                container.classList.remove('has-hover');
                d3.select(this).classed('active', false);
                link.classed('active', false);
                tooltip.classList.remove('visible');
            });
            
            // Update positions on tick with bouncy boundary enforcement
            simulation.on('tick', () => {
                // Bouncy wall collisions
                nodes.forEach(d => {
                    const padding = d.size + 20;
                    const bounce = 0.6; // Wall bounce elasticity
                    
                    // Left wall
                    if (d.x < padding) {
                        d.x = padding + (padding - d.x) * 0.5;
                        d.vx = Math.abs(d.vx) * bounce;
                    }
                    // Right wall
                    if (d.x > width - padding) {
                        d.x = width - padding - (d.x - (width - padding)) * 0.5;
                        d.vx = -Math.abs(d.vx) * bounce;
                    }
                    // Top wall
                    if (d.y < padding) {
                        d.y = padding + (padding - d.y) * 0.5;
                        d.vy = Math.abs(d.vy) * bounce;
                    }
                    // Bottom wall
                    if (d.y > height - padding) {
                        d.y = height - padding - (d.y - (height - padding)) * 0.5;
                        d.vy = -Math.abs(d.vy) * bounce;
                    }
                });
                
                link
                    .attr('x1', d => d.source.x)
                    .attr('y1', d => d.source.y)
                    .attr('x2', d => d.target.x)
                    .attr('y2', d => d.target.y);
                
                node
                    .attr('transform', d => `translate(${d.x},${d.y})`);
                
                // Update label positions to follow nodes
                labelGroup.selectAll('.node-label')
                    .attr('x', d => d.x)
                    .attr('y', d => d.y + d.size + 18);
                
                labelGroup.selectAll('.node-label-desc')
                    .attr('x', d => d.x)
                    .attr('y', d => d.y + d.size + 34);
            });
            
            // Drag functions
            function dragstarted(event, d) {
                if (!event.active) simulation.alphaTarget(0.3).restart();
                d.fx = d.x;
                d.fy = d.y;
            }
            
            function dragged(event, d) {
                d.fx = event.x;
                d.fy = event.y;
            }
            
            function dragended(event, d) {
                if (!event.active) simulation.alphaTarget(0);
                d.fx = null;
                d.fy = null;
            }
            
            // Keep bubbles gently floating with minimal interference
            let floatTime = 0;
            function gentleFloat() {
                floatTime += 0.003;
                nodes.forEach((d, i) => {
                    // Very subtle sine wave motion
                    d.vx += Math.sin(floatTime + i * 0.5) * 0.008;
                    d.vy += Math.cos(floatTime + i * 0.3) * 0.008;
                });
                simulation.alpha(0.05);
                requestAnimationFrame(gentleFloat);
            }
            
            // Start gentle floating after initial settle
            setTimeout(gentleFloat, 3000);
            
            // Handle resize
            window.addEventListener('resize', () => {
                let newWidth = container.clientWidth || 1400;
                let newHeight = container.clientHeight || 650;
                
                // Mobile adjustments
                if (window.innerWidth <= 768) {
                    newHeight = 500;
                }
                
                svg.setAttribute('width', newWidth);
                svg.setAttribute('height', newHeight);
                svg.setAttribute('viewBox', `0 0 ${newWidth} ${newHeight}`);
                
                // Update forces with new dimensions
                simulation.force('center', d3.forceCenter(newWidth / 2, newHeight / 2));
                simulation.force('boundaryX', d3.forceX(newWidth / 2).strength(d => {
                    const padding = d.size + 15;
                    if (d.x < padding) return 0.4;
                    if (d.x > newWidth - padding) return 0.4;
                    return 0;
                }));
                simulation.force('boundaryY', d3.forceY(newHeight / 2).strength(d => {
                    const padding = d.size + 15;
                    if (d.y < padding) return 0.4;
                    if (d.y > newHeight - padding) return 0.4;
                    return 0;
                }));
                
                simulation.alpha(0.3).restart();
            });
        })();

    </script>

</body>
</html>

